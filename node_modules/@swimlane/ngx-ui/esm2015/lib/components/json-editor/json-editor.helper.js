export const requiredIndicatorIcon = `
  <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3.38411 10L2.19205 9.10616L3.89073 6.2089L1 4.97603L1.44702 3.55822L4.48676 4.32877L4.75497 1H6.21523L6.48344 4.29795L9.55298 3.55822L10 4.97603L7.10927 6.2089L8.77815 9.10616L7.61589 10L5.5 7.34931L3.38411 10Z" fill="#72819F" stroke="#72819F" stroke-width="0.5"/>
  </svg>`;
export const propTypes = ['string', 'number', 'integer', 'boolean', 'object', 'array'];
const ɵ0 = () => '', ɵ1 = (value) => {
    return typeof value === 'string';
}, ɵ2 = () => 0, ɵ3 = (value) => {
    return typeof value === 'number';
}, ɵ4 = () => 0, ɵ5 = (value) => {
    return typeof value === 'number';
}, ɵ6 = () => true, ɵ7 = (value) => {
    return typeof value === 'boolean';
}, ɵ8 = () => JSON.parse(JSON.stringify({})), ɵ9 = (value) => {
    return typeof value === 'object';
}, ɵ10 = () => JSON.parse(JSON.stringify([])), ɵ11 = (value) => {
    return Array.isArray(value);
};
export const jsonSchemaDataTypes = [
    {
        name: 'String',
        defaultValue: ɵ0,
        schema: {
            type: 'string'
        },
        icon: 'field-text',
        matchType: ɵ1
    },
    {
        name: 'Number',
        defaultValue: ɵ2,
        schema: {
            type: 'number'
        },
        icon: 'field-numeric',
        matchType: ɵ3
    },
    {
        name: 'Integer',
        defaultValue: ɵ4,
        schema: {
            type: 'integer'
        },
        icon: 'field-numeric',
        matchType: ɵ5
    },
    {
        name: 'Boolean',
        defaultValue: ɵ6,
        schema: {
            type: 'boolean'
        },
        icon: 'check-square-filled',
        matchType: ɵ7
    },
    {
        name: 'Object',
        defaultValue: ɵ8,
        schema: {
            type: 'object'
        },
        icon: 'reference-tree',
        matchType: ɵ9
    },
    {
        name: 'Array',
        defaultValue: ɵ10,
        schema: {
            type: 'array'
        },
        icon: 'integrations',
        matchType: ɵ11
    }
];
const ɵ12 = () => '', ɵ13 = () => {
    return false; // needs to be overriden
}, ɵ14 = () => '', ɵ15 = () => {
    return false; // needs to be overriden
}, ɵ16 = () => '', ɵ17 = () => {
    return false; // needs to be overriden
}, ɵ18 = () => '', ɵ19 = () => {
    return false; // needs to be overriden
};
export const jsonSchemaDataFormats = [
    {
        name: 'Date',
        defaultValue: ɵ12,
        schema: {
            type: 'string',
            format: 'date'
        },
        icon: 'field-date',
        matchType: ɵ13
    },
    {
        name: 'Date & Time',
        defaultValue: ɵ14,
        schema: {
            type: 'string',
            format: 'date-time'
        },
        icon: 'field-date',
        matchType: ɵ15
    },
    {
        name: 'Password',
        defaultValue: ɵ16,
        schema: {
            type: 'string',
            format: 'password'
        },
        icon: 'lock',
        matchType: ɵ17
    },
    {
        name: 'Code',
        defaultValue: ɵ18,
        schema: {
            type: 'string',
            format: 'code'
        },
        icon: 'code',
        matchType: ɵ19
    }
];
export const dataTypeMap = {};
for (const dType of [...jsonSchemaDataTypes, ...jsonSchemaDataFormats]) {
    let key = dType.schema.type;
    if (dType.schema.format) {
        key = `${key}=${dType.schema.format}`;
    }
    dataTypeMap[key] = dType;
}
export function createValueForSchema(schema) {
    if (schema.default) {
        return schema.default;
    }
    if (schema.type) {
        return dataTypeMap[schema.type].defaultValue();
    }
    return null;
}
/**
 * Infers the schema type of the value
 * @param value the value to infer the schema for
 * @param overrides an object with overridden inference functions for various schema types
 * @param allowedTypes the allowed schema types to consider
 */
export function inferType(value, overrides, allowedTypes) {
    if (overrides) {
        for (const typeName in overrides) {
            if (allowedTypes !== undefined && !allowedTypes.includes(typeName)) {
                continue;
            }
            if (dataTypeMap[typeName] && overrides[typeName](value)) {
                return dataTypeMap[typeName].schema;
            }
        }
    }
    let type;
    for (const typeName in dataTypeMap) {
        if (allowedTypes !== undefined && !allowedTypes.includes(typeName)) {
            continue;
        }
        if (dataTypeMap[typeName].matchType(value)) {
            type = dataTypeMap[typeName].schema;
        }
    }
    if (!type) {
        type = dataTypeMap['object'].schema;
    }
    return type;
}
/**
 * Returns the icon for the schema
 */
export function getIcon(schema) {
    let key = schema.type;
    if (schema.format) {
        key = `${key}=${schema.format}`;
    }
    if (dataTypeMap[key]) {
        return dataTypeMap[key].icon;
    }
    return 'integration';
}
/**
 * Returns a string for the schema.$meta.currentType property in the following format:
 * string, string=code, object, etc.
 * @param schema
 */
export function getCurrentType(schema) {
    if (schema.type !== 'string') {
        return schema.type;
    }
    if (schema.format) {
        return `string=${schema.format}`;
    }
    else {
        return 'string';
    }
}
export { ɵ0, ɵ1, ɵ2, ɵ3, ɵ4, ɵ5, ɵ6, ɵ7, ɵ8, ɵ9, ɵ10, ɵ11, ɵ12, ɵ13, ɵ14, ɵ15, ɵ16, ɵ17, ɵ18, ɵ19 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNvbi1lZGl0b3IuaGVscGVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHN3aW1sYW5lL25neC11aS8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2pzb24tZWRpdG9yL2pzb24tZWRpdG9yLmhlbHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBRzs7O1NBRzVCLENBQUM7QUFnQ1YsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFhLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztXQUsvRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLE9BS1gsQ0FBQyxLQUFVLEVBQVcsRUFBRTtJQUNqQyxPQUFPLE9BQU8sS0FBSyxLQUFLLFFBQVEsQ0FBQztBQUNuQyxDQUFDLE9BSWEsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUtWLENBQUMsS0FBVSxFQUFXLEVBQUU7SUFDakMsT0FBTyxPQUFPLEtBQUssS0FBSyxRQUFRLENBQUM7QUFDbkMsQ0FBQyxPQUlhLEdBQUcsRUFBRSxDQUFDLENBQUMsT0FLVixDQUFDLEtBQVUsRUFBVyxFQUFFO0lBQ2pDLE9BQU8sT0FBTyxLQUFLLEtBQUssUUFBUSxDQUFDO0FBQ25DLENBQUMsT0FJYSxHQUFHLEVBQUUsQ0FBQyxJQUFJLE9BS2IsQ0FBQyxLQUFVLEVBQVcsRUFBRTtJQUNqQyxPQUFPLE9BQU8sS0FBSyxLQUFLLFNBQVMsQ0FBQztBQUNwQyxDQUFDLE9BSWEsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BS3ZDLENBQUMsS0FBVSxFQUFXLEVBQUU7SUFDakMsT0FBTyxPQUFPLEtBQUssS0FBSyxRQUFRLENBQUM7QUFDbkMsQ0FBQyxRQUlhLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFD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QztLQUNsQztTQUFNO1FBQ0wsT0FBTyxRQUFRLENBQUM7S0FDakI7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSlNPTlNjaGVtYTcsIEpTT05TY2hlbWE3VHlwZU5hbWUgfSBmcm9tICdqc29uLXNjaGVtYSc7XG5cbmV4cG9ydCBjb25zdCByZXF1aXJlZEluZGljYXRvckljb24gPSBgXG4gIDxzdmcgd2lkdGg9XCIxMVwiIGhlaWdodD1cIjExXCIgdmlld0JveD1cIjAgMCAxMSAxMVwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICAgIDxwYXRoIGQ9XCJNMy4zODQxMSAxMEwyLjE5MjA1IDkuMTA2MTZMMy44OTA3MyA2LjIwODlMMSA0Ljk3NjAzTDEuNDQ3MDIgMy41NTgyMkw0LjQ4Njc2IDQuMzI4NzdMNC43NTQ5NyAxSDYuMjE1MjNMNi40ODM0NCA0LjI5Nzk1TDkuNTUyOTggMy41NTgyMkwxMCA0Ljk3NjAzTDcuMTA5MjcgNi4yMDg5TDguNzc4MTUgOS4xMDYxNkw3LjYxNTg5IDEwTDUuNSA3LjM0OTMxTDMuMzg0MTEgMTBaXCIgZmlsbD1cIiM3MjgxOUZcIiBzdHJva2U9XCIjNzI4MTlGXCIgc3Ryb2tlLXdpZHRoPVwiMC41XCIvPlxuICA8L3N2Zz5gO1xuXG5leHBvcnQgaW50ZXJmYWNlIEpTT05FZGl0b3JTY2hlbWEgZXh0ZW5kcyBKU09OU2NoZW1hNyB7XG4gICRtZXRhPzogYW55O1xuICBwcm9wZXJ0aWVzPzoge1xuICAgIFtrZXk6IHN0cmluZ106IEpTT05FZGl0b3JTY2hlbWE7XG4gIH07XG4gIHBhdHRlcm5Qcm9wZXJ0aWVzPzoge1xuICAgIFtrZXk6IHN0cmluZ106IEpTT05FZGl0b3JTY2hlbWE7XG4gIH07XG4gIGl0ZW1zPzogSlNPTkVkaXRvclNjaGVtYTtcbiAgbmFtZUVkaXRhYmxlPzogYm9vbGVhbjtcbiAgcHJvcGVydHlOYW1lPzogc3RyaW5nO1xuICBjdXJyZW50VHlwZT86IEpTT05TY2hlbWE3VHlwZU5hbWUgfCBKU09OU2NoZW1hN1R5cGVOYW1lW107XG4gIGlkPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5SW5kZXggZXh0ZW5kcyBKU09ORWRpdG9yU2NoZW1hIHtcbiAgW2lkOiBudW1iZXJdOiBKU09ORWRpdG9yU2NoZW1hO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEpzb25TY2hlbWFEYXRhVHlwZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVmYXVsdFZhbHVlOiAoKSA9PiBhbnk7XG4gIHNjaGVtYToge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBmb3JtYXQ/OiBzdHJpbmc7XG4gIH07XG4gIGljb246IHN0cmluZztcbiAgbWF0Y2hUeXBlOiAodmFsdWU6IHN0cmluZykgPT4gYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IHByb3BUeXBlczogc3RyaW5nW10gPSBbJ3N0cmluZycsICdudW1iZXInLCAnaW50ZWdlcicsICdib29sZWFuJywgJ29iamVjdCcsICdhcnJheSddO1xuXG5leHBvcnQgY29uc3QganNvblNjaGVtYURhdGFUeXBlczogSnNvblNjaGVtYURhdGFUeXBlW10gPSBbXG4gIHtcbiAgICBuYW1lOiAnU3RyaW5nJyxcbiAgICBkZWZhdWx0VmFsdWU6ICgpID0+ICcnLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ3N0cmluZydcbiAgICB9LFxuICAgIGljb246ICdmaWVsZC10ZXh0JyxcbiAgICBtYXRjaFR5cGU6ICh2YWx1ZTogYW55KTogYm9vbGVhbiA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJztcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTnVtYmVyJyxcbiAgICBkZWZhdWx0VmFsdWU6ICgpID0+IDAsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnbnVtYmVyJ1xuICAgIH0sXG4gICAgaWNvbjogJ2ZpZWxkLW51bWVyaWMnLFxuICAgIG1hdGNoVHlwZTogKHZhbHVlOiBhbnkpOiBib29sZWFuID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdJbnRlZ2VyJyxcbiAgICBkZWZhdWx0VmFsdWU6ICgpID0+IDAsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnaW50ZWdlcidcbiAgICB9LFxuICAgIGljb246ICdmaWVsZC1udW1lcmljJyxcbiAgICBtYXRjaFR5cGU6ICh2YWx1ZTogYW55KTogYm9vbGVhbiA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJztcbiAgICB9XG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnQm9vbGVhbicsXG4gICAgZGVmYXVsdFZhbHVlOiAoKSA9PiB0cnVlLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgfSxcbiAgICBpY29uOiAnY2hlY2stc3F1YXJlLWZpbGxlZCcsXG4gICAgbWF0Y2hUeXBlOiAodmFsdWU6IGFueSk6IGJvb2xlYW4gPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdPYmplY3QnLFxuICAgIGRlZmF1bHRWYWx1ZTogKCkgPT4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7fSkpLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCdcbiAgICB9LFxuICAgIGljb246ICdyZWZlcmVuY2UtdHJlZScsXG4gICAgbWF0Y2hUeXBlOiAodmFsdWU6IGFueSk6IGJvb2xlYW4gPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG4gICAgfVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0FycmF5JyxcbiAgICBkZWZhdWx0VmFsdWU6ICgpID0+IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoW10pKSxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdhcnJheSdcbiAgICB9LFxuICAgIGljb246ICdpbnRlZ3JhdGlvbnMnLFxuICAgIG1hdGNoVHlwZTogKHZhbHVlOiBhbnkpOiBib29sZWFuID0+IHtcbiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKTtcbiAgICB9XG4gIH1cbl07XG5cbmV4cG9ydCBjb25zdCBqc29uU2NoZW1hRGF0YUZvcm1hdHM6IEpzb25TY2hlbWFEYXRhVHlwZVtdID0gW1xuICB7XG4gICAgbmFtZTogJ0RhdGUnLFxuICAgIGRlZmF1bHRWYWx1ZTogKCkgPT4gJycsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgIGZvcm1hdDogJ2RhdGUnXG4gICAgfSxcbiAgICBpY29uOiAnZmllbGQtZGF0ZScsXG4gICAgbWF0Y2hUeXBlOiAoKTogYm9vbGVhbiA9PiB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIG5lZWRzIHRvIGJlIG92ZXJyaWRlblxuICAgIH1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdEYXRlICYgVGltZScsXG4gICAgZGVmYXVsdFZhbHVlOiAoKSA9PiAnJyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgZm9ybWF0OiAnZGF0ZS10aW1lJ1xuICAgIH0sXG4gICAgaWNvbjogJ2ZpZWxkLWRhdGUnLFxuICAgIG1hdGNoVHlwZTogKCk6IGJvb2xlYW4gPT4ge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBuZWVkcyB0byBiZSBvdmVycmlkZW5cbiAgICB9XG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUGFzc3dvcmQnLFxuICAgIGRlZmF1bHRWYWx1ZTogKCkgPT4gJycsXG4gICAgc2NoZW1hOiB7XG4gICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgIGZvcm1hdDogJ3Bhc3N3b3JkJ1xuICAgIH0sXG4gICAgaWNvbjogJ2xvY2snLFxuICAgIG1hdGNoVHlwZTogKCk6IGJvb2xlYW4gPT4ge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBuZWVkcyB0byBiZSBvdmVycmlkZW5cbiAgICB9XG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnQ29kZScsXG4gICAgZGVmYXVsdFZhbHVlOiAoKSA9PiAnJyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgZm9ybWF0OiAnY29kZSdcbiAgICB9LFxuICAgIGljb246ICdjb2RlJyxcbiAgICBtYXRjaFR5cGU6ICgpOiBib29sZWFuID0+IHtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gbmVlZHMgdG8gYmUgb3ZlcnJpZGVuXG4gICAgfVxuICB9XG5dO1xuXG5leHBvcnQgY29uc3QgZGF0YVR5cGVNYXA6IHt9ID0ge307XG5mb3IgKGNvbnN0IGRUeXBlIG9mIFsuLi5qc29uU2NoZW1hRGF0YVR5cGVzLCAuLi5qc29uU2NoZW1hRGF0YUZvcm1hdHNdKSB7XG4gIGxldCBrZXkgPSBkVHlwZS5zY2hlbWEudHlwZTtcbiAgaWYgKGRUeXBlLnNjaGVtYS5mb3JtYXQpIHtcbiAgICBrZXkgPSBgJHtrZXl9PSR7ZFR5cGUuc2NoZW1hLmZvcm1hdH1gO1xuICB9XG5cbiAgZGF0YVR5cGVNYXBba2V5XSA9IGRUeXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVmFsdWVGb3JTY2hlbWEoc2NoZW1hOiBKU09ORWRpdG9yU2NoZW1hKTogYW55IHtcbiAgaWYgKHNjaGVtYS5kZWZhdWx0KSB7XG4gICAgcmV0dXJuIHNjaGVtYS5kZWZhdWx0O1xuICB9XG4gIGlmIChzY2hlbWEudHlwZSkge1xuICAgIHJldHVybiBkYXRhVHlwZU1hcFtzY2hlbWEudHlwZSBhcyBzdHJpbmddLmRlZmF1bHRWYWx1ZSgpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEluZmVycyB0aGUgc2NoZW1hIHR5cGUgb2YgdGhlIHZhbHVlXG4gKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRvIGluZmVyIHRoZSBzY2hlbWEgZm9yXG4gKiBAcGFyYW0gb3ZlcnJpZGVzIGFuIG9iamVjdCB3aXRoIG92ZXJyaWRkZW4gaW5mZXJlbmNlIGZ1bmN0aW9ucyBmb3IgdmFyaW91cyBzY2hlbWEgdHlwZXNcbiAqIEBwYXJhbSBhbGxvd2VkVHlwZXMgdGhlIGFsbG93ZWQgc2NoZW1hIHR5cGVzIHRvIGNvbnNpZGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZlclR5cGUodmFsdWU6IGFueSwgb3ZlcnJpZGVzPzogYW55LCBhbGxvd2VkVHlwZXM/OiBzdHJpbmdbXSk6IGFueSB7XG4gIGlmIChvdmVycmlkZXMpIHtcbiAgICBmb3IgKGNvbnN0IHR5cGVOYW1lIGluIG92ZXJyaWRlcykge1xuICAgICAgaWYgKGFsbG93ZWRUeXBlcyAhPT0gdW5kZWZpbmVkICYmICFhbGxvd2VkVHlwZXMuaW5jbHVkZXModHlwZU5hbWUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGFUeXBlTWFwW3R5cGVOYW1lXSAmJiBvdmVycmlkZXNbdHlwZU5hbWVdKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZGF0YVR5cGVNYXBbdHlwZU5hbWVdLnNjaGVtYTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsZXQgdHlwZTtcbiAgZm9yIChjb25zdCB0eXBlTmFtZSBpbiBkYXRhVHlwZU1hcCkge1xuICAgIGlmIChhbGxvd2VkVHlwZXMgIT09IHVuZGVmaW5lZCAmJiAhYWxsb3dlZFR5cGVzLmluY2x1ZGVzKHR5cGVOYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGRhdGFUeXBlTWFwW3R5cGVOYW1lXS5tYXRjaFR5cGUodmFsdWUpKSB7XG4gICAgICB0eXBlID0gZGF0YVR5cGVNYXBbdHlwZU5hbWVdLnNjaGVtYTtcbiAgICB9XG4gIH1cblxuICBpZiAoIXR5cGUpIHtcbiAgICB0eXBlID0gZGF0YVR5cGVNYXBbJ29iamVjdCddLnNjaGVtYTtcbiAgfVxuICByZXR1cm4gdHlwZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpY29uIGZvciB0aGUgc2NoZW1hXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJY29uKHNjaGVtYTogSlNPTkVkaXRvclNjaGVtYSk6IHN0cmluZyB7XG4gIGxldCBrZXkgPSBzY2hlbWEudHlwZSBhcyBzdHJpbmc7XG4gIGlmIChzY2hlbWEuZm9ybWF0KSB7XG4gICAga2V5ID0gYCR7a2V5fT0ke3NjaGVtYS5mb3JtYXR9YDtcbiAgfVxuICBpZiAoZGF0YVR5cGVNYXBba2V5XSkge1xuICAgIHJldHVybiBkYXRhVHlwZU1hcFtrZXldLmljb247XG4gIH1cblxuICByZXR1cm4gJ2ludGVncmF0aW9uJztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIGZvciB0aGUgc2NoZW1hLiRtZXRhLmN1cnJlbnRUeXBlIHByb3BlcnR5IGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0OlxuICogc3RyaW5nLCBzdHJpbmc9Y29kZSwgb2JqZWN0LCBldGMuXG4gKiBAcGFyYW0gc2NoZW1hXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VHlwZShzY2hlbWE6IEpTT05FZGl0b3JTY2hlbWEpOiBzdHJpbmcge1xuICBpZiAoc2NoZW1hLnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHNjaGVtYS50eXBlIGFzIHN0cmluZztcbiAgfVxuXG4gIGlmIChzY2hlbWEuZm9ybWF0KSB7XG4gICAgcmV0dXJuIGBzdHJpbmc9JHtzY2hlbWEuZm9ybWF0fWA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICdzdHJpbmcnO1xuICB9XG59XG4iXX0=