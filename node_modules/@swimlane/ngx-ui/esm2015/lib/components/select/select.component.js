import { __decorate, __metadata } from "tslib";
import { Component, Input, Output, EventEmitter, QueryList, ContentChildren, forwardRef, ElementRef, Renderer2, OnDestroy, ViewChild, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';
import { SelectOptionDirective } from './select-option.directive';
import { SelectInputComponent } from './select-input.component';
import { KeyboardKeys } from '../../enums';
let nextId = 0;
const SELECT_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => SelectComponent),
    multi: true
};
let SelectComponent = class SelectComponent {
    constructor(_element, _renderer, _cdr) {
        this._element = _element;
        this._renderer = _renderer;
        this._cdr = _cdr;
        this.id = `select-${++nextId}`;
        this.placeholder = '';
        this.emptyPlaceholder = 'No options available';
        this.filterEmptyPlaceholder = 'No matches...';
        this.filterPlaceholder = 'Filter options...';
        this.allowAdditionsText = 'Add Value';
        this.requiredIndicator = '*';
        this.options = [];
        this.change = new EventEmitter();
        this.keyup = new EventEmitter();
        this.toggle = new EventEmitter();
        this.focusIndex = -1;
        this.dropdownActive = false;
        this._value = [];
        this._autofocus = false;
        this._allowClear = true;
        this._allowAdditions = false;
        this._disableDropdown = false;
        this._closeOnBodyClick = true;
        this._filterable = true;
        this._filterCaseSensitive = false;
        this._tagging = false;
        this._multiple = false;
        this._disabled = false;
    }
    get minSelections() {
        return this._minSelections;
    }
    set minSelections(minSelections) {
        this._minSelections = coerceNumberProperty(minSelections);
    }
    get maxSelections() {
        return this._maxSelections;
    }
    set maxSelections(maxSelections) {
        this._maxSelections = coerceNumberProperty(maxSelections);
    }
    get autofocus() {
        return this._autofocus;
    }
    set autofocus(autofocus) {
        this._autofocus = coerceBooleanProperty(autofocus);
    }
    get allowClear() {
        return this._allowClear;
    }
    set allowClear(allowClear) {
        this._allowClear = coerceBooleanProperty(allowClear);
    }
    get allowAdditions() {
        return this._allowAdditions;
    }
    set allowAdditions(allowAdditions) {
        this._allowAdditions = coerceBooleanProperty(allowAdditions);
    }
    get disableDropdown() {
        return this._disableDropdown;
    }
    set disableDropdown(disableDropdown) {
        this._disableDropdown = coerceBooleanProperty(disableDropdown);
    }
    get closeOnSelect() {
        return this._closeOnSelect;
    }
    set closeOnSelect(closeOnSelect) {
        this._closeOnSelect = coerceBooleanProperty(closeOnSelect);
    }
    get closeOnBodyClick() {
        return this._closeOnBodyClick;
    }
    set closeOnBodyClick(closeOnBodyClick) {
        this._closeOnBodyClick = coerceBooleanProperty(closeOnBodyClick);
    }
    get filterable() {
        return this._filterable;
    }
    set filterable(filterable) {
        this._filterable = coerceBooleanProperty(filterable);
    }
    get required() {
        return this._required;
    }
    set required(required) {
        this._required = coerceBooleanProperty(required);
    }
    get filterCaseSensitive() {
        return this._filterCaseSensitive;
    }
    set filterCaseSensitive(filterCaseSensitive) {
        this._filterCaseSensitive = coerceBooleanProperty(filterCaseSensitive);
    }
    get tagging() {
        return this._tagging;
    }
    set tagging(tagging) {
        this._tagging = coerceBooleanProperty(tagging);
    }
    get multiple() {
        return this._multiple;
    }
    set multiple(multiple) {
        this._multiple = coerceBooleanProperty(multiple);
    }
    get disabled() {
        return this._disabled;
    }
    set disabled(disabled) {
        this._disabled = coerceBooleanProperty(disabled);
    }
    get optionTemplates() {
        return this._optionTemplates;
    }
    set optionTemplates(val) {
        this._optionTemplates = val;
        if (val) {
            const arr = val.toArray();
            if (arr.length) {
                this.options = arr;
            }
        }
        this._cdr.markForCheck();
    }
    get invalid() {
        if (this.required && this.checkInvalidValue(this.value))
            return true;
        if (this.maxSelections !== undefined && (this.value && this.value.length > this.maxSelections))
            return true;
        if (this.minSelections !== undefined && (!this.value || this.value.length < this.minSelections))
            return true;
        return false;
    }
    get requiredIndicatorView() {
        const required = this.required || (this.minSelections !== undefined && this.minSelections > 0);
        if (!this.requiredIndicator || !required) {
            return '';
        }
        return this.requiredIndicator;
    }
    get isSingleSelect() {
        return !this.multiple && !this.tagging;
    }
    get hasSelections() {
        return this.value && this.value.length > 0 && typeof this.value[0] !== 'undefined';
    }
    get hasPlaceholder() {
        return this.placeholder && this.placeholder.length > 0;
    }
    get value() {
        return this._value;
    }
    set value(val) {
        if (val !== this._value) {
            this._value = val;
            this.onChangeCallback(this._value);
            this.change.emit(this._value);
            this._cdr.markForCheck();
        }
    }
    get dropdownVisible() {
        if (this.disableDropdown)
            return false;
        if (this.tagging && (!this.options || !this.options.length))
            return false;
        return this.dropdownActive;
    }
    ngOnDestroy() {
        this.toggleDropdown(false);
    }
    onDropdownSelection(selection) {
        if (selection.disabled)
            return;
        if (this.value.length === this.maxSelections)
            return;
        const idx = this.value.findIndex(o => {
            if (this.identifier) {
                return o[this.identifier] === selection.value[this.identifier];
            }
            return o === selection.value;
        });
        if (idx === -1) {
            this.value = this.multiple || this.tagging ? [...this.value, selection.value] : [selection.value];
        }
        // if tagging, we need to clear current text
        if (this.tagging) {
            this.inputComponent.inputElement.nativeElement.value = '';
        }
        const shouldClose = this.closeOnSelect || !this.multiple;
        if (shouldClose) {
            this.toggleDropdown(false);
        }
    }
    onInputSelection(selections) {
        this.value = selections;
    }
    onFocus() {
        if (this.disabled)
            return;
        this.toggleDropdown(true);
        this.onTouchedCallback();
    }
    onClear() {
        this.value = [];
    }
    onBodyClick(event) {
        if (this.dropdownActive) {
            const contains = this._element.nativeElement.contains(event.target);
            /* istanbul ignore else */
            if (!contains) {
                this.toggleDropdown(false);
            }
        }
    }
    onClose() {
        this.toggleDropdown(false);
    }
    onToggle() {
        if (this.disabled)
            return;
        this.toggleDropdown(!this.dropdownActive);
        this.onTouchedCallback();
    }
    toggleDropdown(state) {
        if (this.dropdownActive === state)
            return;
        this.dropdownActive = state;
        if (this.toggleListener)
            this.toggleListener();
        this.toggle.emit(this.dropdownActive);
        if (state && this.closeOnBodyClick) {
            this.toggleListener = this._renderer.listen(document.body, 'click', this.onBodyClick.bind(this));
        }
        this._cdr.markForCheck();
    }
    onKeyUp({ event, value }) {
        if (event && event.key === KeyboardKeys.ARROW_DOWN) {
            ++this.focusIndex;
        }
        else {
            this.filterQuery = value;
        }
        this.keyup.emit({ event, value });
    }
    writeValue(val) {
        /* istanbul ignore else */
        if (val !== this._value) {
            this._value = val;
            this._cdr.markForCheck();
        }
    }
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    checkInvalidValue(value) {
        if (Array.isArray(value)) {
            return !this.value.length || this.checkInvalidValue(value[0]);
        }
        return value === undefined;
    }
    /* istanbul ignore next */
    onTouchedCallback() {
        // placeholder
    }
    /* istanbul ignore next */
    onChangeCallback(_) {
        // placeholder
    }
};
SelectComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 },
    { type: ChangeDetectorRef }
];
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "id", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "name", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "label", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "hint", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "placeholder", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "emptyPlaceholder", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "filterEmptyPlaceholder", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "filterPlaceholder", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "allowAdditionsText", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "groupBy", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "selectCaret", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], SelectComponent.prototype, "requiredIndicator", void 0);
__decorate([
    Input(),
    __metadata("design:type", Array)
], SelectComponent.prototype, "options", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SelectComponent.prototype, "identifier", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "minSelections", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "maxSelections", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "autofocus", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "allowClear", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "allowAdditions", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "disableDropdown", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "closeOnSelect", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "closeOnBodyClick", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "filterable", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "required", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "filterCaseSensitive", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "tagging", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "multiple", null);
__decorate([
    Input(),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], SelectComponent.prototype, "disabled", null);
__decorate([
    Output(),
    __metadata("design:type", Object)
], SelectComponent.prototype, "change", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], SelectComponent.prototype, "keyup", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], SelectComponent.prototype, "toggle", void 0);
__decorate([
    ViewChild(SelectInputComponent, { static: true }),
    __metadata("design:type", SelectInputComponent)
], SelectComponent.prototype, "inputComponent", void 0);
__decorate([
    ContentChildren(SelectOptionDirective),
    __metadata("design:type", QueryList),
    __metadata("design:paramtypes", [QueryList])
], SelectComponent.prototype, "optionTemplates", null);
SelectComponent = __decorate([
    Component({
        exportAs: 'ngxSelect',
        selector: 'ngx-select',
        template: "<div class=\"ngx-select-wrap\">\n  <div class=\"ngx-select-flex-wrap\">\n    <div class=\"ngx-select-flex-wrap-inner\">\n      <ngx-select-input\n        [autofocus]=\"autofocus\"\n        [options]=\"options\"\n        [allowClear]=\"allowClear\"\n        [label]=\"label\"\n        [requiredIndicator]=\"requiredIndicatorView\"\n        [placeholder]=\"placeholder\"\n        [multiple]=\"multiple\"\n        [identifier]=\"identifier\"\n        [tagging]=\"tagging\"\n        [allowAdditions]=\"allowAdditions\"\n        [selectCaret]=\"selectCaret\"\n        [selected]=\"value\"\n        [hint]=\"hint\"\n        [disableDropdown]=\"disableDropdown\"\n        (keyup)=\"onKeyUp($event)\"\n        (toggle)=\"onToggle()\"\n        (activate)=\"onFocus()\"\n        (selection)=\"onInputSelection($event)\"\n      >\n      </ngx-select-input>\n    </div>\n  </div>\n  <ngx-select-dropdown\n    *ngIf=\"dropdownVisible\"\n    [focusIndex]=\"focusIndex\"\n    [filterQuery]=\"filterQuery\"\n    [filterPlaceholder]=\"filterPlaceholder\"\n    [filterCaseSensitive]=\"filterCaseSensitive\"\n    [allowAdditions]=\"allowAdditions\"\n    [allowAdditionsText]=\"allowAdditionsText\"\n    [selected]=\"value\"\n    [groupBy]=\"groupBy\"\n    [emptyPlaceholder]=\"emptyPlaceholder\"\n    [tagging]=\"tagging\"\n    [filterEmptyPlaceholder]=\"filterEmptyPlaceholder\"\n    [filterable]=\"filterable\"\n    [identifier]=\"identifier\"\n    [options]=\"options\"\n    (keyup)=\"keyup.emit($event)\"\n    (close)=\"onClose()\"\n    (selection)=\"onDropdownSelection($event)\"\n  >\n  </ngx-select-dropdown>\n</div>\n",
        host: {
            class: 'ngx-select',
            '[id]': 'id',
            '[attr.name]': 'name',
            '[class.invalid]': 'invalid',
            '[class.tagging-selection]': 'tagging',
            '[class.multi-selection]': 'multiple',
            '[class.single-selection]': 'isSingleSelect',
            '[class.disabled]': 'disabled',
            '[class.active]': 'dropdownActive',
            '[class.active-selections]': 'hasSelections',
            '[class.has-placeholder]': 'hasPlaceholder'
        },
        providers: [SELECT_VALUE_ACCESSOR],
        encapsulation: ViewEncapsulation.None,
        changeDetection: ChangeDetectionStrategy.OnPush,
        styles: ["input[type=number],input[type=password],input[type=tel],input[type=text],textarea{display:inline-block;box-sizing:border-box;outline:0}.form-input{background:#313847;border:1px solid #455066;color:#b6b6b6;-webkit-transition:box-shadow .2s;transition:box-shadow .2s;border-radius:0;font-size:13px;height:32px;line-height:32px;width:100%;padding:6px;margin-bottom:1em}.form-input::-webkit-input-placeholder{color:#647493}.form-input::-moz-placeholder{color:#647493}.form-input::-ms-input-placeholder{color:#647493}.form-input::placeholder{color:#647493}.form-input:focus{box-shadow:0 1px 5px 0 rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.12)}.form-input[disabled]{cursor:not-allowed;color:#363636}textarea.form-input{min-height:120px;line-height:1.3em}.ngx-input{display:block;margin-top:16px;margin-bottom:8px;padding-top:20px;padding-top:calc(.7em + 8px);padding-bottom:0}.ngx-input input:-webkit-autofill,.ngx-input input:-webkit-autofill:active,.ngx-input input:-webkit-autofill:focus,.ngx-input input:-webkit-autofill:hover{-webkit-transition:background-color 5000s ease-in-out;transition:background-color 5000s ease-in-out;-webkit-text-fill-color:#cfcfcf!important}.ngx-input .ngx-input-flex-wrap{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;display:-webkit-box;display:flex}.ngx-input .ngx-input-flex-wrap .ngx-input-flex-wrap-inner{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1}.ngx-input .ngx-input-flex-wrap ngx-input-prefix,.ngx-input .ngx-input-flex-wrap ngx-input-suffix{-webkit-box-flex:0;flex:none;white-space:nowrap;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.ngx-input .ngx-input-flex-wrap ngx-input-prefix>*,.ngx-input .ngx-input-flex-wrap ngx-input-suffix>*{display:inline-fflex}.ngx-input ngx-input-prefix{margin-right:8px}.ngx-input ngx-input-suffix{margin-left:8px}.ngx-input .ngx-input-wrap{position:relative;display:block;margin-bottom:0;width:100%}.ngx-input .ngx-input-wrap .ngx-input-box-wrap{position:relative;width:100%}.ngx-input .ngx-input-wrap .ngx-input-box-wrap:focus{outline:0}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-box,.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-textarea{-webkit-box-flex:1;flex:auto;background:0 0;border:none;margin-bottom:0;padding-left:0;width:100%;color:#cdd2dd;font-size:1em;min-height:0;font-family:inherit}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-box::-webkit-input-placeholder,.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-textarea::-webkit-input-placeholder{color:#647493}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-box::-moz-placeholder,.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-textarea::-moz-placeholder{color:#647493}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-box::-ms-input-placeholder,.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-textarea::-ms-input-placeholder{color:#647493}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-box::placeholder,.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-textarea::placeholder{color:#647493}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-box:focus,.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-textarea:focus{box-shadow:none;outline:0}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-box[disabled],.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-textarea[disabled]{color:#72819f;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-box{margin:3px 0}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .ngx-input-textarea{resize:none}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .icon-eye{line-height:25px;top:0;bottom:0;position:absolute;right:10px;cursor:pointer;font-size:.8rem;color:#9c9c9c;-webkit-transition:color .1s;transition:color .1s}.ngx-input .ngx-input-wrap .ngx-input-box-wrap .icon-eye:hover{color:#b6b6b6}.ngx-input .ngx-input-wrap .ngx-input-label{pointer-events:none;position:absolute;font-size:16px}.ngx-input .ngx-input-wrap .ngx-input-underline{width:100%;height:1px;background-color:#5a6884}.ngx-input .ngx-input-wrap .ngx-input-underline .underline-fill{background-color:#1483ff;width:100%;height:2px;margin:0 auto}.ngx-input .ngx-input-wrap .ngx-input-hint{font-size:12px;color:#909cb4;margin-top:2px;min-height:1em}.ngx-input.invalid.ng-touched .ngx-input-underline,.ngx-input.ng-invalid.ng-dirty .ngx-input-underline,.ngx-input.ng-invalid.ng-touched .ngx-input-underline{background-color:#ff4514}.ngx-input.invalid.ng-touched .ngx-input-label,.ngx-input.ng-invalid.ng-dirty .ngx-input-label,.ngx-input.ng-invalid.ng-touched .ngx-input-label{font-weight:600;color:#ff4514}.ngx-input.invalid.ng-touched .ngx-input-hint,.ngx-input.ng-invalid.ng-dirty .ngx-input-hint,.ngx-input.ng-invalid.ng-touched .ngx-input-hint{color:#ff4514}.ngx-select{position:relative;display:block;min-width:300px;line-height:1.4em;margin-top:16px;margin-bottom:8px;padding-top:20px;padding-top:calc(.7em + 8px);padding-bottom:0}.ngx-select .ngx-select-flex-wrap{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;display:-webkit-box;display:flex}.ngx-select .ngx-select-flex-wrap .ngx-select-flex-wrap-inner{display:-webkit-box;display:flex;-webkit-box-flex:100%;flex:100%;width:100%}.ngx-select .ngx-select-wrap{position:relative;display:block;margin-bottom:0;width:100%}.ngx-select .ngx-select-wrap .ngx-select-hint{font-size:12px;color:#909cb4;margin-top:2px;line-height:1.4em;min-height:1em}.ngx-select.active .ngx-select-input .ngx-select-input-underline .underline-fill{width:100%}.ngx-select.active .ngx-select-input .ngx-select-caret{-webkit-transition:-webkit-transform .2s ease-in-out;transition:transform .2s ease-in-out;transition:transform .2s ease-in-out,-webkit-transform .2s ease-in-out;-webkit-transform:rotate(180deg) translateY(50%);transform:rotate(180deg) translateY(50%)}.ngx-select.active .ngx-select-dropdown{display:block;opacity:1;-webkit-animation:.25s openAnimation;animation:.25s openAnimation}.ngx-select.disabled .ngx-select-input .ngx-select-input-box{cursor:not-allowed}.ngx-select.active .ngx-select-input .ngx-select-label,.ngx-select.active-selections .ngx-select-input .ngx-select-label,.ngx-select.has-placeholder .ngx-select-input .ngx-select-label{font-size:.7rem;top:-25px;-webkit-transition:150ms ease-out;transition:150ms ease-out;line-height:30px}.ngx-select.multi-selection .ngx-select-input-option,.ngx-select.tagging-selection .ngx-select-input-option{background:#455066;color:#cfcfcf;border-radius:.7em;margin:0 5px;height:1.4em;white-space:nowrap;overflow:visible;text-overflow:ellipsis;cursor:text;-webkit-transition:background .1s ease-in;transition:background .1s ease-in;position:relative;top:0;padding:0 .7em;font-size:.95em}.ngx-select.multi-selection .ngx-select-input-option:hover,.ngx-select.tagging-selection .ngx-select-input-option:hover{background:#1483ff}.ngx-select.multi-selection .ngx-select-input-option .ngx-select-input-name,.ngx-select.tagging-selection .ngx-select-input-option .ngx-select-input-name{text-shadow:2px 4px 2px rgba(0,0,0,.1);max-width:300px;overflow:hidden;display:inline-block;white-space:nowrap;text-overflow:ellipsis;vertical-align:top}.ngx-select.multi-selection .ngx-select-input-option .ngx-select-clear,.ngx-select.tagging-selection .ngx-select-input-option .ngx-select-clear{display:inline;vertical-align:middle;font-size:.8em;color:#cfcfcf;-webkit-transition:color .1s ease-in;transition:color .1s ease-in;cursor:pointer;line-height:1.4em}.ngx-select.multi-selection .ngx-select-input-option .ngx-select-clear:hover,.ngx-select.tagging-selection .ngx-select-input-option .ngx-select-clear:hover{color:#1c2029}.ngx-select.multi-selection .ngx-select-input-option.disabled,.ngx-select.tagging-selection .ngx-select-input-option.disabled{padding-right:10px}.ngx-select.tagging-selection .ngx-select-input .ngx-select-input-box{cursor:text}.ngx-select.tagging-selection .ngx-select-input .ng-select-text-box{background-color:transparent;border:none;outline:0;-webkit-appearance:none;color:#b6b6b6;line-height:20px;display:inline-block;height:20px;vertical-align:bottom;margin-bottom:6px}.ngx-select.tagging-selection .ngx-select-input .ng-select-text-box:focus{outline:0}.ngx-select.single-selection .ngx-select-input .ngx-select-input-list .ngx-select-input-option{width:100%;white-space:nowrap;text-overflow:ellipsis;display:block;color:#cdd2dd;overflow-x:hidden;overflow-y:visible}.ngx-select.single-selection .ngx-select-input .ngx-select-clear{position:absolute;top:1em;right:25px;-webkit-transform:translateY(-50%);transform:translateY(-50%);cursor:pointer;color:#696969;font-size:12px;height:auto;line-height:normal}.ngx-select.single-selection .ngx-select-input .ngx-select-clear:hover{color:#cfcfcf}.ngx-select .ngx-select-input{display:block;position:relative;margin-bottom:0;width:100%}.ngx-select .ngx-select-input .ngx-select-input-box{background:0 0;border:none;margin-bottom:0;padding-left:0;width:100%;min-height:1em;cursor:pointer;display:inline-block;vertical-align:bottom}.ngx-select .ngx-select-input .ngx-select-input-underline{width:100%;height:1px;margin-top:2px;background-color:#5a6884}.ngx-select .ngx-select-input .ngx-select-input-underline .underline-fill{background-color:#1483ff;-webkit-transition:width 250ms ease-out;transition:width 250ms ease-out;width:0;height:2px;margin:0 auto}.ngx-select .ngx-select-input .ngx-select-input-list{margin-right:40px;padding-top:0;color:#b6b6b6;min-height:1.4em}.ngx-select .ngx-select-input .ngx-select-label{pointer-events:none;position:absolute;top:0}.ngx-select .ngx-select-input .ngx-select-caret{position:absolute;top:1em;right:5px;-webkit-transform:translateY(-50%);transform:translateY(-50%);cursor:pointer;color:#696969;font-size:.7em}.ngx-select .ngx-select-input .ngx-select-placeholder{position:absolute;top:0;left:0;cursor:pointer;color:#647493}.ngx-select .ngx-select-dropdown{position:absolute;clear:left;top:100%;left:0;z-index:1000;width:100%;background:#313847;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 3px 3px -2px rgba(0,0,0,.12);margin-top:10px;opacity:0;display:none;-webkit-transition:visibility,opacity .25s ease-out;transition:visibility,opacity .25s ease-out}.ngx-select .ngx-select-dropdown .ngx-select-dropdown-options{max-height:300px;overflow-y:auto}.ngx-select .ngx-select-dropdown .ngx-select-dropdown-options .ngx-select-dropdown-option{padding:7px 15px;font-size:15px;overflow-x:hidden;overflow-y:visible;text-overflow:ellipsis}.ngx-select .ngx-select-dropdown .ngx-select-dropdown-options .ngx-select-dropdown-option:not(.disabled){cursor:pointer}.ngx-select .ngx-select-dropdown .ngx-select-dropdown-options .ngx-select-dropdown-option:not(.disabled):not(.selected).active,.ngx-select .ngx-select-dropdown .ngx-select-dropdown-options .ngx-select-dropdown-option:not(.disabled):not(.selected):hover{background:#5a6884}.ngx-select .ngx-select-dropdown .ngx-select-dropdown-options .ngx-select-dropdown-option.selected{background:#479eff;color:#cfcfcf}.ngx-select .ngx-select-dropdown .ngx-select-dropdown-options .ngx-select-dropdown-option.selected:not(.disabled).active,.ngx-select .ngx-select-dropdown .ngx-select-dropdown-options .ngx-select-dropdown-option.selected:not(.disabled):hover{background:#1483ff}.ngx-select .ngx-select-dropdown.groupings .ngx-select-option-group .ngx-select-option-group-name{padding:7px 15px;font-size:18px;display:block;background:#262c38;font-weight:700}.ngx-select .ngx-select-dropdown.groupings .ngx-select-dropdown-options .ngx-select-dropdown-option{padding:7px 25px}.ngx-select .ngx-select-dropdown.groupings .ngx-select-dropdown-options .ngx-select-dropdown-option:last-child{margin-bottom:10px}.ngx-select .ngx-select-dropdown .ngx-select-filter{padding:10px;background:#455066}.ngx-select .ngx-select-dropdown .ngx-select-filter .ngx-select-filter-input{color:#b6b6b6;background:0 0;border:none;outline:0;display:block;font-size:15px;width:100%}.ngx-select .ngx-select-dropdown .ngx-select-empty-placeholder{color:#9c9c9c;padding:7px 15px;font-size:15px;font-style:italic}.ngx-select .ngx-select-dropdown .ngx-select-empty-placeholder .ngx-select-empty-placeholder-add{font-style:normal;float:right}.ngx-select.invalid .ngx-select-label{font-weight:600;color:#ff4514}.ngx-select.invalid .ngx-select-caret,.ngx-select.invalid .ngx-select-hint{color:#ff4514}.ngx-select.invalid .ngx-select-input-underline{background-color:#ff4514}@-webkit-keyframes openAnimation{0%{-webkit-transform:translateY(-25px);transform:translateY(-25px)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes openAnimation{0%{-webkit-transform:translateY(-25px);transform:translateY(-25px)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}"]
    }),
    __metadata("design:paramtypes", [ElementRef,
        Renderer2,
        ChangeDetectorRef])
], SelectComponent);
export { SelectComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bzd2ltbGFuZS9uZ3gtdWkvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9zZWxlY3Qvc2VsZWN0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFlBQVksRUFDWixTQUFTLEVBQ1QsZUFBZSxFQUNmLFVBQVUsRUFDVixVQUFVLEVBQ1YsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsaUJBQWlCLEVBQ2pCLHVCQUF1QixFQUN2QixpQkFBaUIsRUFDbEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRXBGLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRWhFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFFM0MsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBRWYsTUFBTSxxQkFBcUIsR0FBRztJQUM1QixPQUFPLEVBQUUsaUJBQWlCO0lBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDO0lBQzlDLEtBQUssRUFBRSxJQUFJO0NBQ1osQ0FBQztBQXdCRixJQUFhLGVBQWUsR0FBNUIsTUFBYSxlQUFlO0lBaU8xQixZQUNtQixRQUFvQixFQUNwQixTQUFvQixFQUNwQixJQUF1QjtRQUZ2QixhQUFRLEdBQVIsUUFBUSxDQUFZO1FBQ3BCLGNBQVMsR0FBVCxTQUFTLENBQVc7UUFDcEIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFuT2pDLE9BQUUsR0FB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QUFnQjtTQUM1QztRQUNELFNBQVMsRUFBRSxDQUFDLHFCQUFxQixDQUFDO1FBQ2xDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO1FBQ3JDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNOztLQUNoRCxDQUFDO3FDQW1PNkIsVUFBVTtRQUNULFNBQVM7UUFDZCxpQkFBaUI7R0FwTy9CLGVBQWUsQ0FzVzNCO1NBdFdZLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgUXVlcnlMaXN0LFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIGZvcndhcmRSZWYsXG4gIEVsZW1lbnRSZWYsXG4gIFJlbmRlcmVyMixcbiAgT25EZXN0cm95LFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHksIGNvZXJjZU51bWJlclByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcblxuaW1wb3J0IHsgU2VsZWN0T3B0aW9uRGlyZWN0aXZlIH0gZnJvbSAnLi9zZWxlY3Qtb3B0aW9uLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBTZWxlY3RJbnB1dENvbXBvbmVudCB9IGZyb20gJy4vc2VsZWN0LWlucHV0LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZWxlY3REcm9wZG93bk9wdGlvbiB9IGZyb20gJy4vc2VsZWN0LWRyb3Bkb3duLW9wdGlvbi5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgS2V5Ym9hcmRLZXlzIH0gZnJvbSAnLi4vLi4vZW51bXMnO1xuXG5sZXQgbmV4dElkID0gMDtcblxuY29uc3QgU0VMRUNUX1ZBTFVFX0FDQ0VTU09SID0ge1xuICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gU2VsZWN0Q29tcG9uZW50KSxcbiAgbXVsdGk6IHRydWVcbn07XG5cbkBDb21wb25lbnQoe1xuICBleHBvcnRBczogJ25neFNlbGVjdCcsXG4gIHNlbGVjdG9yOiAnbmd4LXNlbGVjdCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9zZWxlY3QuY29tcG9uZW50LnNjc3MnXSxcbiAgaG9zdDoge1xuICAgIGNsYXNzOiAnbmd4LXNlbGVjdCcsXG4gICAgJ1tpZF0nOiAnaWQnLFxuICAgICdbYXR0ci5uYW1lXSc6ICduYW1lJyxcbiAgICAnW2NsYXNzLmludmFsaWRdJzogJ2ludmFsaWQnLFxuICAgICdbY2xhc3MudGFnZ2luZy1zZWxlY3Rpb25dJzogJ3RhZ2dpbmcnLFxuICAgICdbY2xhc3MubXVsdGktc2VsZWN0aW9uXSc6ICdtdWx0aXBsZScsXG4gICAgJ1tjbGFzcy5zaW5nbGUtc2VsZWN0aW9uXSc6ICdpc1NpbmdsZVNlbGVjdCcsXG4gICAgJ1tjbGFzcy5kaXNhYmxlZF0nOiAnZGlzYWJsZWQnLFxuICAgICdbY2xhc3MuYWN0aXZlXSc6ICdkcm9wZG93bkFjdGl2ZScsXG4gICAgJ1tjbGFzcy5hY3RpdmUtc2VsZWN0aW9uc10nOiAnaGFzU2VsZWN0aW9ucycsXG4gICAgJ1tjbGFzcy5oYXMtcGxhY2Vob2xkZXJdJzogJ2hhc1BsYWNlaG9sZGVyJ1xuICB9LFxuICBwcm92aWRlcnM6IFtTRUxFQ1RfVkFMVUVfQUNDRVNTT1JdLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBTZWxlY3RDb21wb25lbnQgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciwgT25EZXN0cm95IHtcbiAgQElucHV0KCkgaWQ6IHN0cmluZyA9IGBzZWxlY3QtJHsrK25leHRJZH1gO1xuICBASW5wdXQoKSBuYW1lOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGhpbnQ6IHN0cmluZztcbiAgQElucHV0KCkgcGxhY2Vob2xkZXI6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKSBlbXB0eVBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnTm8gb3B0aW9ucyBhdmFpbGFibGUnO1xuICBASW5wdXQoKSBmaWx0ZXJFbXB0eVBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnTm8gbWF0Y2hlcy4uLic7XG4gIEBJbnB1dCgpIGZpbHRlclBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnRmlsdGVyIG9wdGlvbnMuLi4nO1xuICBASW5wdXQoKSBhbGxvd0FkZGl0aW9uc1RleHQ6IHN0cmluZyA9ICdBZGQgVmFsdWUnO1xuICBASW5wdXQoKSBncm91cEJ5OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHNlbGVjdENhcmV0OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHJlcXVpcmVkSW5kaWNhdG9yOiBzdHJpbmcgfCBib29sZWFuID0gJyonO1xuXG4gIEBJbnB1dCgpIG9wdGlvbnM6IFNlbGVjdERyb3Bkb3duT3B0aW9uW10gPSBbXTtcbiAgQElucHV0KCkgaWRlbnRpZmllcjogc3RyaW5nO1xuXG4gIEBJbnB1dCgpXG4gIGdldCBtaW5TZWxlY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl9taW5TZWxlY3Rpb25zO1xuICB9XG4gIHNldCBtaW5TZWxlY3Rpb25zKG1pblNlbGVjdGlvbnMpIHtcbiAgICB0aGlzLl9taW5TZWxlY3Rpb25zID0gY29lcmNlTnVtYmVyUHJvcGVydHkobWluU2VsZWN0aW9ucyk7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgbWF4U2VsZWN0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4U2VsZWN0aW9ucztcbiAgfVxuICBzZXQgbWF4U2VsZWN0aW9ucyhtYXhTZWxlY3Rpb25zKSB7XG4gICAgdGhpcy5fbWF4U2VsZWN0aW9ucyA9IGNvZXJjZU51bWJlclByb3BlcnR5KG1heFNlbGVjdGlvbnMpO1xuICB9XG5cbiAgQElucHV0KClcbiAgZ2V0IGF1dG9mb2N1cygpIHtcbiAgICByZXR1cm4gdGhpcy5fYXV0b2ZvY3VzO1xuICB9XG4gIHNldCBhdXRvZm9jdXMoYXV0b2ZvY3VzKSB7XG4gICAgdGhpcy5fYXV0b2ZvY3VzID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGF1dG9mb2N1cyk7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgYWxsb3dDbGVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5fYWxsb3dDbGVhcjtcbiAgfVxuICBzZXQgYWxsb3dDbGVhcihhbGxvd0NsZWFyKSB7XG4gICAgdGhpcy5fYWxsb3dDbGVhciA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShhbGxvd0NsZWFyKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBhbGxvd0FkZGl0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fYWxsb3dBZGRpdGlvbnM7XG4gIH1cbiAgc2V0IGFsbG93QWRkaXRpb25zKGFsbG93QWRkaXRpb25zKSB7XG4gICAgdGhpcy5fYWxsb3dBZGRpdGlvbnMgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoYWxsb3dBZGRpdGlvbnMpO1xuICB9XG5cbiAgQElucHV0KClcbiAgZ2V0IGRpc2FibGVEcm9wZG93bigpIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZURyb3Bkb3duO1xuICB9XG4gIHNldCBkaXNhYmxlRHJvcGRvd24oZGlzYWJsZURyb3Bkb3duKSB7XG4gICAgdGhpcy5fZGlzYWJsZURyb3Bkb3duID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGRpc2FibGVEcm9wZG93bik7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgY2xvc2VPblNlbGVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xvc2VPblNlbGVjdDtcbiAgfVxuICBzZXQgY2xvc2VPblNlbGVjdChjbG9zZU9uU2VsZWN0KSB7XG4gICAgdGhpcy5fY2xvc2VPblNlbGVjdCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShjbG9zZU9uU2VsZWN0KTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBjbG9zZU9uQm9keUNsaWNrKCkge1xuICAgIHJldHVybiB0aGlzLl9jbG9zZU9uQm9keUNsaWNrO1xuICB9XG4gIHNldCBjbG9zZU9uQm9keUNsaWNrKGNsb3NlT25Cb2R5Q2xpY2spIHtcbiAgICB0aGlzLl9jbG9zZU9uQm9keUNsaWNrID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGNsb3NlT25Cb2R5Q2xpY2spO1xuICB9XG5cbiAgQElucHV0KClcbiAgZ2V0IGZpbHRlcmFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZpbHRlcmFibGU7XG4gIH1cbiAgc2V0IGZpbHRlcmFibGUoZmlsdGVyYWJsZSkge1xuICAgIHRoaXMuX2ZpbHRlcmFibGUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoZmlsdGVyYWJsZSk7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgcmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVpcmVkO1xuICB9XG4gIHNldCByZXF1aXJlZChyZXF1aXJlZCkge1xuICAgIHRoaXMuX3JlcXVpcmVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHJlcXVpcmVkKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBmaWx0ZXJDYXNlU2Vuc2l0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLl9maWx0ZXJDYXNlU2Vuc2l0aXZlO1xuICB9XG4gIHNldCBmaWx0ZXJDYXNlU2Vuc2l0aXZlKGZpbHRlckNhc2VTZW5zaXRpdmUpIHtcbiAgICB0aGlzLl9maWx0ZXJDYXNlU2Vuc2l0aXZlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGZpbHRlckNhc2VTZW5zaXRpdmUpO1xuICB9XG5cbiAgQElucHV0KClcbiAgZ2V0IHRhZ2dpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhZ2dpbmc7XG4gIH1cbiAgc2V0IHRhZ2dpbmcodGFnZ2luZykge1xuICAgIHRoaXMuX3RhZ2dpbmcgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodGFnZ2luZyk7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgbXVsdGlwbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX211bHRpcGxlO1xuICB9XG4gIHNldCBtdWx0aXBsZShtdWx0aXBsZSkge1xuICAgIHRoaXMuX211bHRpcGxlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KG11bHRpcGxlKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBkaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gIH1cbiAgc2V0IGRpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoZGlzYWJsZWQpO1xuICB9XG5cbiAgQE91dHB1dCgpIGNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55W10+KCk7XG4gIEBPdXRwdXQoKSBrZXl1cCA9IG5ldyBFdmVudEVtaXR0ZXI8eyBldmVudDogS2V5Ym9hcmRFdmVudDsgdmFsdWU/OiBzdHJpbmcgfT4oKTtcbiAgQE91dHB1dCgpIHRvZ2dsZSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblxuICBAVmlld0NoaWxkKFNlbGVjdElucHV0Q29tcG9uZW50LCB7IHN0YXRpYzogdHJ1ZSB9KVxuICByZWFkb25seSBpbnB1dENvbXBvbmVudDogU2VsZWN0SW5wdXRDb21wb25lbnQ7XG5cbiAgQENvbnRlbnRDaGlsZHJlbihTZWxlY3RPcHRpb25EaXJlY3RpdmUpXG4gIGdldCBvcHRpb25UZW1wbGF0ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvblRlbXBsYXRlcztcbiAgfVxuICBzZXQgb3B0aW9uVGVtcGxhdGVzKHZhbDogUXVlcnlMaXN0PFNlbGVjdE9wdGlvbkRpcmVjdGl2ZT4pIHtcbiAgICB0aGlzLl9vcHRpb25UZW1wbGF0ZXMgPSB2YWw7XG5cbiAgICBpZiAodmFsKSB7XG4gICAgICBjb25zdCBhcnIgPSB2YWwudG9BcnJheSgpO1xuXG4gICAgICBpZiAoYXJyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBhcnI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fY2RyLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgZ2V0IGludmFsaWQoKSB7XG4gICAgaWYgKHRoaXMucmVxdWlyZWQgJiYgdGhpcy5jaGVja0ludmFsaWRWYWx1ZSh0aGlzLnZhbHVlKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKHRoaXMubWF4U2VsZWN0aW9ucyAhPT0gdW5kZWZpbmVkICYmICh0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUubGVuZ3RoID4gdGhpcy5tYXhTZWxlY3Rpb25zKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKHRoaXMubWluU2VsZWN0aW9ucyAhPT0gdW5kZWZpbmVkICYmICghdGhpcy52YWx1ZSB8fCB0aGlzLnZhbHVlLmxlbmd0aCA8IHRoaXMubWluU2VsZWN0aW9ucykpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdldCByZXF1aXJlZEluZGljYXRvclZpZXcoKSB7XG4gICAgY29uc3QgcmVxdWlyZWQgPSB0aGlzLnJlcXVpcmVkIHx8ICh0aGlzLm1pblNlbGVjdGlvbnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm1pblNlbGVjdGlvbnMgPiAwKTtcblxuICAgIGlmICghdGhpcy5yZXF1aXJlZEluZGljYXRvciB8fCAhcmVxdWlyZWQpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXF1aXJlZEluZGljYXRvciBhcyBzdHJpbmc7XG4gIH1cblxuICBnZXQgaXNTaW5nbGVTZWxlY3QoKSB7XG4gICAgcmV0dXJuICF0aGlzLm11bHRpcGxlICYmICF0aGlzLnRhZ2dpbmc7XG4gIH1cblxuICBnZXQgaGFzU2VsZWN0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHRoaXMudmFsdWVbMF0gIT09ICd1bmRlZmluZWQnO1xuICB9XG5cbiAgZ2V0IGhhc1BsYWNlaG9sZGVyKCkge1xuICAgIHJldHVybiB0aGlzLnBsYWNlaG9sZGVyICYmIHRoaXMucGxhY2Vob2xkZXIubGVuZ3RoID4gMDtcbiAgfVxuXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cbiAgc2V0IHZhbHVlKHZhbDogYW55W10pIHtcbiAgICBpZiAodmFsICE9PSB0aGlzLl92YWx1ZSkge1xuICAgICAgdGhpcy5fdmFsdWUgPSB2YWw7XG4gICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodGhpcy5fdmFsdWUpO1xuICAgICAgdGhpcy5jaGFuZ2UuZW1pdCh0aGlzLl92YWx1ZSk7XG4gICAgICB0aGlzLl9jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRyb3Bkb3duVmlzaWJsZSgpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlRHJvcGRvd24pIHJldHVybiBmYWxzZTtcbiAgICBpZiAodGhpcy50YWdnaW5nICYmICghdGhpcy5vcHRpb25zIHx8ICF0aGlzLm9wdGlvbnMubGVuZ3RoKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLmRyb3Bkb3duQWN0aXZlO1xuICB9XG5cbiAgdG9nZ2xlTGlzdGVuZXI/OiAoKSA9PiB2b2lkO1xuICBmaWx0ZXJRdWVyeTogc3RyaW5nO1xuICBmb2N1c0luZGV4OiBudW1iZXIgPSAtMTtcbiAgZHJvcGRvd25BY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIF9vcHRpb25UZW1wbGF0ZXM6IFF1ZXJ5TGlzdDxTZWxlY3RPcHRpb25EaXJlY3RpdmU+O1xuICBwcml2YXRlIF92YWx1ZTogYW55W10gPSBbXTtcblxuICBwcml2YXRlIF9taW5TZWxlY3Rpb25zPzogbnVtYmVyO1xuICBwcml2YXRlIF9tYXhTZWxlY3Rpb25zPzogbnVtYmVyO1xuXG4gIHByaXZhdGUgX2F1dG9mb2N1czogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9hbGxvd0NsZWFyOiBib29sZWFuID0gdHJ1ZTtcbiAgcHJpdmF0ZSBfYWxsb3dBZGRpdGlvbnM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfZGlzYWJsZURyb3Bkb3duOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2Nsb3NlT25TZWxlY3Q6IGJvb2xlYW47XG4gIHByaXZhdGUgX2Nsb3NlT25Cb2R5Q2xpY2s6IGJvb2xlYW4gPSB0cnVlO1xuICBwcml2YXRlIF9maWx0ZXJhYmxlOiBib29sZWFuID0gdHJ1ZTtcbiAgcHJpdmF0ZSBfcmVxdWlyZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgX2ZpbHRlckNhc2VTZW5zaXRpdmUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfdGFnZ2luZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9tdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9kaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jZHI6IENoYW5nZURldGVjdG9yUmVmXG4gICkge31cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZURyb3Bkb3duKGZhbHNlKTtcbiAgfVxuXG4gIG9uRHJvcGRvd25TZWxlY3Rpb24oc2VsZWN0aW9uOiBTZWxlY3REcm9wZG93bk9wdGlvbik6IHZvaWQge1xuICAgIGlmIChzZWxlY3Rpb24uZGlzYWJsZWQpIHJldHVybjtcbiAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IHRoaXMubWF4U2VsZWN0aW9ucykgcmV0dXJuO1xuXG4gICAgY29uc3QgaWR4ID0gdGhpcy52YWx1ZS5maW5kSW5kZXgobyA9PiB7XG4gICAgICBpZiAodGhpcy5pZGVudGlmaWVyKSB7XG4gICAgICAgIHJldHVybiBvW3RoaXMuaWRlbnRpZmllcl0gPT09IHNlbGVjdGlvbi52YWx1ZVt0aGlzLmlkZW50aWZpZXJdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbyA9PT0gc2VsZWN0aW9uLnZhbHVlO1xuICAgIH0pO1xuXG4gICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm11bHRpcGxlIHx8IHRoaXMudGFnZ2luZyA/IFsuLi50aGlzLnZhbHVlLCBzZWxlY3Rpb24udmFsdWVdIDogW3NlbGVjdGlvbi52YWx1ZV07XG4gICAgfVxuXG4gICAgLy8gaWYgdGFnZ2luZywgd2UgbmVlZCB0byBjbGVhciBjdXJyZW50IHRleHRcbiAgICBpZiAodGhpcy50YWdnaW5nKSB7XG4gICAgICB0aGlzLmlucHV0Q29tcG9uZW50LmlucHV0RWxlbWVudC5uYXRpdmVFbGVtZW50LnZhbHVlID0gJyc7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvdWxkQ2xvc2UgPSB0aGlzLmNsb3NlT25TZWxlY3QgfHwgIXRoaXMubXVsdGlwbGU7XG5cbiAgICBpZiAoc2hvdWxkQ2xvc2UpIHtcbiAgICAgIHRoaXMudG9nZ2xlRHJvcGRvd24oZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIG9uSW5wdXRTZWxlY3Rpb24oc2VsZWN0aW9uczogYW55W10pOiB2b2lkIHtcbiAgICB0aGlzLnZhbHVlID0gc2VsZWN0aW9ucztcbiAgfVxuXG4gIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcblxuICAgIHRoaXMudG9nZ2xlRHJvcGRvd24odHJ1ZSk7XG4gICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjaygpO1xuICB9XG5cbiAgb25DbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLnZhbHVlID0gW107XG4gIH1cblxuICBvbkJvZHlDbGljayhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kcm9wZG93bkFjdGl2ZSkge1xuICAgICAgY29uc3QgY29udGFpbnMgPSB0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KTtcblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIGlmICghY29udGFpbnMpIHtcbiAgICAgICAgdGhpcy50b2dnbGVEcm9wZG93bihmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZURyb3Bkb3duKGZhbHNlKTtcbiAgfVxuXG4gIG9uVG9nZ2xlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSByZXR1cm47XG5cbiAgICB0aGlzLnRvZ2dsZURyb3Bkb3duKCF0aGlzLmRyb3Bkb3duQWN0aXZlKTtcbiAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrKCk7XG4gIH1cblxuICB0b2dnbGVEcm9wZG93bihzdGF0ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICh0aGlzLmRyb3Bkb3duQWN0aXZlID09PSBzdGF0ZSkgcmV0dXJuO1xuXG4gICAgdGhpcy5kcm9wZG93bkFjdGl2ZSA9IHN0YXRlO1xuXG4gICAgaWYgKHRoaXMudG9nZ2xlTGlzdGVuZXIpIHRoaXMudG9nZ2xlTGlzdGVuZXIoKTtcbiAgICB0aGlzLnRvZ2dsZS5lbWl0KHRoaXMuZHJvcGRvd25BY3RpdmUpO1xuXG4gICAgaWYgKHN0YXRlICYmIHRoaXMuY2xvc2VPbkJvZHlDbGljaykge1xuICAgICAgdGhpcy50b2dnbGVMaXN0ZW5lciA9IHRoaXMuX3JlbmRlcmVyLmxpc3Rlbihkb2N1bWVudC5ib2R5LCAnY2xpY2snLCB0aGlzLm9uQm9keUNsaWNrLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHRoaXMuX2Nkci5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIG9uS2V5VXAoeyBldmVudCwgdmFsdWUgfTogeyBldmVudDogS2V5Ym9hcmRFdmVudDsgdmFsdWU/OiBzdHJpbmcgfSk6IHZvaWQge1xuICAgIGlmIChldmVudCAmJiBldmVudC5rZXkgPT09IChLZXlib2FyZEtleXMuQVJST1dfRE9XTiBhcyBhbnkpKSB7XG4gICAgICArK3RoaXMuZm9jdXNJbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJRdWVyeSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHRoaXMua2V5dXAuZW1pdCh7IGV2ZW50LCB2YWx1ZSB9KTtcbiAgfVxuXG4gIHdyaXRlVmFsdWUodmFsOiBhbnlbXSk6IHZvaWQge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKHZhbCAhPT0gdGhpcy5fdmFsdWUpIHtcbiAgICAgIHRoaXMuX3ZhbHVlID0gdmFsO1xuICAgICAgdGhpcy5fY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSBmbjtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tJbnZhbGlkVmFsdWUodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuICF0aGlzLnZhbHVlLmxlbmd0aCB8fCB0aGlzLmNoZWNrSW52YWxpZFZhbHVlKHZhbHVlWzBdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHByaXZhdGUgb25Ub3VjaGVkQ2FsbGJhY2soKSB7XG4gICAgLy8gcGxhY2Vob2xkZXJcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHByaXZhdGUgb25DaGFuZ2VDYWxsYmFjayhfOiBhbnkpIHtcbiAgICAvLyBwbGFjZWhvbGRlclxuICB9XG59XG4iXX0=