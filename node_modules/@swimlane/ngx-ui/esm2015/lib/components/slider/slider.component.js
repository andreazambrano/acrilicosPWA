import { __decorate, __metadata } from "tslib";
import { Component, Input, Output, EventEmitter, OnInit, HostListener, forwardRef, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
let nextId = 0;
const SLIDER_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => SliderComponent),
    multi: true
};
const edge = window.navigator.userAgent.indexOf('Edge') > -1;
let SliderComponent = class SliderComponent {
    constructor(cdr) {
        this.cdr = cdr;
        this.id = `range-${++nextId}`;
        this.min = 0;
        this.max = 100;
        this.step = 1;
        this.orientation = 'horizontal';
        this.filled = false;
        this.multiple = false;
        this.disabled = false;
        this.showTicks = false;
        this.change = new EventEmitter();
        this._values = [0];
        this._percents = [0];
        this._thumbs = [];
        this._ticks = [];
        this._active = [];
        this.onChangeCallback = () => {
            // placeholder
        };
        this.onTouchedCallback = () => {
            // placeholder
        };
    }
    get value() {
        if (!this._values)
            return 0;
        if (this.multiple)
            return [...this._values].sort((a, b) => a - b).join(',');
        return this._values[0];
    }
    set value(val) {
        val = ('' + val).split(',');
        if (String(val) !== String(this._values)) {
            this.setValues(val);
            this.onChangeCallback(this._values);
            this.change.emit({
                value: this._values,
                percent: this.percent
            });
            this.cdr.markForCheck();
        }
    }
    get percent() {
        const pct = this._percents;
        if (this.multiple)
            return pct.join(',');
        return '' + pct[0];
    }
    get isHorizontal() {
        return this.orientation === 'horizontal';
    }
    get isVertical() {
        return this.orientation === 'vertical';
    }
    ngOnInit() {
        if (this.showTicks) {
            this._ticks = this.getTicks();
        }
        this.setValues([0]);
    }
    setValues(values) {
        this._values = values;
        this._percents = values
            .map(v => Math.max(this.min, Math.min(this.max, v)))
            .map(v => Math.round((100 * (v - this.min)) / (this.max - this.min)));
        this._thumbs = this._percents.map(p => {
            return {
                left: `calc(${p}% - ${p / 100}em)`
            };
        });
        if (this.filled) {
            this._fill = this.getFill();
        }
        if (this.showTicks) {
            this._ticks = this.getTicks();
        }
    }
    setActive(index, active) {
        this._active[index] = active;
    }
    setValue(val, index) {
        if (this._values[index] !== val) {
            this._values[index] = val;
            this.setValues(this._values);
            this.onChangeCallback(this.value);
            this.change.emit({
                value: this.value,
                percent: this.percent
            });
        }
    }
    getCount() {
        const idxs = [];
        const step = this.tickStep || this.step;
        let i = this.min;
        while (i <= this.max) {
            idxs.push(i);
            i += step;
        }
        return idxs;
    }
    getTicks() {
        return this.getCount().map(p => {
            return {
                left: `calc(${p}% - ${p / 100 - 0.5}em)`
            };
        });
    }
    getFill() {
        if (this.filled) {
            const percentMin = this.multiple ? Math.min(...this._percents) : 0;
            const percentMax = this.multiple ? Math.max(...this._percents) : this._percents[0];
            const width = percentMax - percentMin;
            if (edge && this.multiple) {
                return {
                    left: `calc(${percentMin}% - ${percentMin / 100 - 0.5}em)`,
                    'background-size': `calc(${width}% - ${width / 100}em) 100%`
                };
            }
            return {
                left: `${percentMin}%`,
                'background-size': `${width}% 100%`
            };
        }
    }
    onMouseDown(event) {
        event.stopPropagation();
        this.active = true;
    }
    onMouseUp(event) {
        event.stopPropagation();
        this.active = false;
    }
    onChange(event) {
        event.stopPropagation();
        this.change.emit({
            value: this.value,
            percent: this.percent
        });
    }
    writeValue(val) {
        val = val ? String(val).split(',') : ['0'];
        if (String(val) !== String(this._values)) {
            this.setValues(val.map(v => +v));
            this.cdr.markForCheck();
        }
    }
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    trackIndex(index) {
        return index;
    }
};
SliderComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
__decorate([
    Input(),
    __metadata("design:type", String)
], SliderComponent.prototype, "id", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], SliderComponent.prototype, "min", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], SliderComponent.prototype, "max", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], SliderComponent.prototype, "step", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], SliderComponent.prototype, "orientation", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], SliderComponent.prototype, "filled", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], SliderComponent.prototype, "multiple", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], SliderComponent.prototype, "disabled", void 0);
__decorate([
    Input(),
    __metadata("design:type", Boolean)
], SliderComponent.prototype, "showTicks", void 0);
__decorate([
    Input(),
    __metadata("design:type", Number)
], SliderComponent.prototype, "tickStep", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], SliderComponent.prototype, "change", void 0);
__decorate([
    HostListener('mousedown', ['$event']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", void 0)
], SliderComponent.prototype, "onMouseDown", null);
__decorate([
    HostListener('mouseup', ['$event']),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Object]),
    __metadata("design:returntype", void 0)
], SliderComponent.prototype, "onMouseUp", null);
SliderComponent = __decorate([
    Component({
        selector: 'ngx-slider',
        exportAs: 'ngxSlider',
        template: "<div class=\"slider-inner\">\n  <div class=\"ticks-container\" *ngIf=\"showTicks\">\n    <div class=\"tick\" *ngFor=\"let s of _ticks\" [ngStyle]=\"s\"></div>\n  </div>\n  <div class=\"inputs\">\n    <div class=\"slider-track\"></div>\n    <span *ngIf=\"filled\" [ngStyle]=\"_fill\" class=\"fill-bar\"> </span>\n    <ng-container *ngFor=\"let value of _values; let i = index; let odd = odd; trackBy: trackIndex\">\n      <input\n        type=\"range\"\n        [id]=\"id + '-' + i\"\n        [attr.list]=\"id + '-list'\"\n        [attr.orientation]=\"orientation\"\n        [class.odd]=\"odd\"\n        [class.active]=\"_active[i]\"\n        [ngModel]=\"value\"\n        (ngModelChange)=\"setValue($event, i)\"\n        [min]=\"min\"\n        [max]=\"max\"\n        [step]=\"step\"\n        [disabled]=\"disabled\"\n        (input)=\"onChange($event)\"\n        (change)=\"onChange($event)\"\n        (mouseenter)=\"setActive(i, true)\"\n        (mouseleave)=\"setActive(i, false)\"\n      />\n      <div class=\"slider-thumb\" [class.active]=\"_active[i]\" [ngStyle]=\"_thumbs[i]\"></div>\n    </ng-container>\n  </div>\n</div>\n",
        encapsulation: ViewEncapsulation.None,
        changeDetection: ChangeDetectionStrategy.OnPush,
        providers: [SLIDER_VALUE_ACCESSOR],
        host: {
            class: 'ngx-slider',
            '[class.filled]': 'filled',
            '[class.multiple]': 'multiple',
            '[class.disabled]': 'disabled',
            '[class.active]': 'active',
            '[class.vertical]': 'isVertical',
            '[class.horizontal]': 'isHorizontal'
        },
        styles: [".ngx-slider .slider-inner{margin:1em auto;position:relative;display:inline-block}.ngx-slider .inputs{position:releative;min-width:12.5em;height:1em}.ngx-slider .inputs input[type=range]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent}.ngx-slider .inputs input[type=range]::-webkit-slider-runnable-track{cursor:pointer;color:transparent;background:0 0;border-color:transparent;-webkit-appearance:none;appearance:none}.ngx-slider .inputs input[type=range]::-moz-range-track{cursor:pointer;color:transparent;background:0 0;border-color:transparent;-moz-appearance:none;appearance:none}.ngx-slider .inputs input[type=range]::-ms-track{color:transparent;background:0 0;border-color:transparent;appearance:none;cursor:pointer}.ngx-slider .inputs input[type=range]::-webkit-slider-thumb{border:transparent;width:1em;height:1em;-webkit-appearance:none;appearance:none;position:relative;background:0 0;cursor:pointer;color:transparent;z-index:301}.ngx-slider .inputs input[type=range]::-moz-range-thumb{border:transparent;width:1em;height:1em;-moz-appearance:none;appearance:none;position:relative;background:0 0;cursor:pointer;transform:scale(1);z-index:302}.ngx-slider .inputs input[type=range]::-ms-thumb{border:transparent;width:1em;height:1em;appearance:none;position:relative;background:0 0;cursor:pointer;transform:scale(1);z-index:302}.ngx-slider .inputs input[type=range]:focus{outline:0}.ngx-slider .inputs .slider-track{position:absolute;background-color:#479eff;width:100%;height:2px;top:calc(.5em - 1px);pointer-events:none;opacity:.3}.ngx-slider .inputs .slider-thumb{position:absolute;background-color:#479eff;height:1em;width:1em;border-radius:.5em;pointer-events:none;z-index:100;box-shadow:0 0 0 0 rgba(71,158,255,.3);-webkit-transition:box-shadow .3s ease-in-out;transition:box-shadow .3s ease-in-out}.ngx-slider .inputs .slider-thumb.active{box-shadow:0 0 0 5px rgba(71,158,255,.3)}.ngx-slider .ticks-container{position:absolute;display:block;top:0;width:100%;height:3px;opacity:.3}.ngx-slider .ticks-container .tick{position:absolute;border:none;height:100%;width:2px;background-color:#479eff}.ngx-slider.filled .fill-bar{background-repeat:no-repeat;background-image:-webkit-gradient(linear,left top,left bottom,from(#479eff),to(#479eff));background-image:linear-gradient(#479eff,#479eff);position:absolute;border-radius:0;z-index:99;pointer-events:none;height:4px;left:0;top:calc(50% - 2px);width:100%}.ngx-slider.vertical{display:inline-block;height:initial;min-height:12.5em;width:1em}.ngx-slider.vertical .slider-inner{-webkit-transform:translate(0,-100%) rotate(-90deg) translate(-100%,0);transform:translate(0,-100%) rotate(-90deg) translate(-100%,0);-webkit-transform-origin:top left;transform-origin:top left}@supports (-ms-ime-align:auto){.ngx-slider.multiple .inputs input[type=range]{position:relative;display:block;-webkit-appearance:slider-vertical;-moz-appearance:slider-vertical;appearance:slider-vertical}.ngx-slider.multiple .inputs input[type=range]::-webkit-slider-runnable-track{all:initial;-webkit-appearance:initial;appearance:initial}.ngx-slider.multiple .inputs input[type=range]::-ms-track{all:initial;appearance:initial;color:transparent;background-color:transparentl;border:none;opacity:0;height:2px}.ngx-slider.multiple .inputs input[type=range]::-webkit-slider-thumb{all:initial;-webkit-appearance:initial;appearance:initial}.ngx-slider.multiple .inputs input[type=range]::-ms-thumb{all:initial;color:transparent;background-color:transparent;appearance:initial;border-radius:0;height:1px;width:1px;border:.5em solid transparent;border-top:.5em solid #479eff}.ngx-slider.multiple .inputs input[type=range].odd::-ms-thumb{border:.5em solid transparent;border-bottom:.5em solid #479eff}.ngx-slider.multiple .slider-track{height:100%;left:.5em;width:calc(100% - 1em)}.ngx-slider.multiple .slider-thumb{display:none}.ngx-slider.multiple .fill-bar{height:100%;margin-top:1px;opacity:.6}}"]
    }),
    __metadata("design:paramtypes", [ChangeDetectorRef])
], SliderComponent);
export { SliderComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xpZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bzd2ltbGFuZS9uZ3gtdWkvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9zbGlkZXIvc2xpZGVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFlBQVksRUFDWixNQUFNLEVBQ04sWUFBWSxFQUNaLFVBQVUsRUFDVixpQkFBaUIsRUFDakIsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFekUsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBRWYsTUFBTSxxQkFBcUIsR0FBUTtJQUNqQyxPQUFPLEVBQUUsaUJBQWlCO0lBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsZUFBZSxDQUFDO0lBQzlDLEtBQUssRUFBRSxJQUFJO0NBQ1osQ0FBQztBQUVGLE1BQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQW9CN0QsSUFBYSxlQUFlLEdBQTVCLE1BQWEsZUFBZTtJQXdEMUIsWUFBb0IsR0FBc0I7UUFBdEIsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUF2RGpDLE9BQUUsR0FBVyxTQUFTLEVBQUUsTUFBTSxFQUFFLENBQUM7UUFDakMsUUFBRyxHQUFXLENBQUMsQ0FBQztRQUNoQixRQUFHLEdBQVcsR0FBRyxDQUFDO1FBQ2xCLFNBQUksR0FBVyxDQUFDLENBQUM7UUFDakIsZ0JBQVcsR0FBVyxZQUFZLENBQUM7UUFDbkMsV0FBTSxHQUFZLEtBQUssQ0FBQztRQUN4QixhQUFRLEdBQVksS0FBSyxDQUFDO1FBQzFCLGFBQVEsR0FBWSxLQUFLLENBQUM7UUFD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Q2xDLElBQUksRUFBRTtZQUNKLEtBQUssRUFBRSxZQUFZO1lBQ25CLGdCQUFnQixFQUFFLFFBQVE7WUFDMUIsa0JBQWtCLEVBQUUsVUFBVTtZQUM5QixrQkFBa0IsRUFBRSxVQUFVO1lBQzlCLGdCQUFnQixFQUFFLFFBQVE7WUFDMUIsa0JBQWtCLEVBQUUsWUFBWTtZQUNoQyxvQkFBb0IsRUFBRSxjQUFjO1NBQ3JDOztLQUNGLENBQUM7cUNBeUR5QixpQkFBaUI7R0F4RC9CLGVBQWUsQ0ErTDNCO1NBL0xZLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgT25Jbml0LFxuICBIb3N0TGlzdGVuZXIsXG4gIGZvcndhcmRSZWYsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmxldCBuZXh0SWQgPSAwO1xuXG5jb25zdCBTTElERVJfVkFMVUVfQUNDRVNTT1I6IGFueSA9IHtcbiAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFNsaWRlckNvbXBvbmVudCksXG4gIG11bHRpOiB0cnVlXG59O1xuXG5jb25zdCBlZGdlID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRWRnZScpID4gLTE7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25neC1zbGlkZXInLFxuICBleHBvcnRBczogJ25neFNsaWRlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9zbGlkZXIuY29tcG9uZW50Lmh0bWwnLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgc3R5bGVVcmxzOiBbJy4vc2xpZGVyLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByb3ZpZGVyczogW1NMSURFUl9WQUxVRV9BQ0NFU1NPUl0sXG4gIGhvc3Q6IHtcbiAgICBjbGFzczogJ25neC1zbGlkZXInLFxuICAgICdbY2xhc3MuZmlsbGVkXSc6ICdmaWxsZWQnLFxuICAgICdbY2xhc3MubXVsdGlwbGVdJzogJ211bHRpcGxlJyxcbiAgICAnW2NsYXNzLmRpc2FibGVkXSc6ICdkaXNhYmxlZCcsXG4gICAgJ1tjbGFzcy5hY3RpdmVdJzogJ2FjdGl2ZScsXG4gICAgJ1tjbGFzcy52ZXJ0aWNhbF0nOiAnaXNWZXJ0aWNhbCcsXG4gICAgJ1tjbGFzcy5ob3Jpem9udGFsXSc6ICdpc0hvcml6b250YWwnXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgU2xpZGVyQ29tcG9uZW50IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE9uSW5pdCB7XG4gIEBJbnB1dCgpIGlkOiBzdHJpbmcgPSBgcmFuZ2UtJHsrK25leHRJZH1gO1xuICBASW5wdXQoKSBtaW46IG51bWJlciA9IDA7XG4gIEBJbnB1dCgpIG1heDogbnVtYmVyID0gMTAwO1xuICBASW5wdXQoKSBzdGVwOiBudW1iZXIgPSAxO1xuICBASW5wdXQoKSBvcmllbnRhdGlvbjogc3RyaW5nID0gJ2hvcml6b250YWwnO1xuICBASW5wdXQoKSBmaWxsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgbXVsdGlwbGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgc2hvd1RpY2tzOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIHRpY2tTdGVwOiBudW1iZXI7XG4gIEBPdXRwdXQoKSBjaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgX3ZhbHVlcyA9IFswXTtcbiAgX3BlcmNlbnRzID0gWzBdO1xuICBfdGh1bWJzOiBhbnlbXSA9IFtdO1xuICBfZmlsbDogYW55O1xuICBfdGlja3MgPSBbXTtcbiAgX2FjdGl2ZSA9IFtdO1xuICBhY3RpdmU6IGJvb2xlYW47XG5cbiAgZ2V0IHZhbHVlKCkge1xuICAgIGlmICghdGhpcy5fdmFsdWVzKSByZXR1cm4gMDtcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkgcmV0dXJuIFsuLi50aGlzLl92YWx1ZXNdLnNvcnQoKGEsIGIpID0+IGEgLSBiKS5qb2luKCcsJyk7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlc1swXTtcbiAgfVxuXG4gIHNldCB2YWx1ZSh2YWw6IGFueSkge1xuICAgIHZhbCA9ICgnJyArIHZhbCkuc3BsaXQoJywnKTtcbiAgICBpZiAoU3RyaW5nKHZhbCkgIT09IFN0cmluZyh0aGlzLl92YWx1ZXMpKSB7XG4gICAgICB0aGlzLnNldFZhbHVlcyh2YWwpO1xuICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMuX3ZhbHVlcyk7XG5cbiAgICAgIHRoaXMuY2hhbmdlLmVtaXQoe1xuICAgICAgICB2YWx1ZTogdGhpcy5fdmFsdWVzLFxuICAgICAgICBwZXJjZW50OiB0aGlzLnBlcmNlbnRcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuICBnZXQgcGVyY2VudCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBjdCA9IHRoaXMuX3BlcmNlbnRzO1xuICAgIGlmICh0aGlzLm11bHRpcGxlKSByZXR1cm4gcGN0LmpvaW4oJywnKTtcbiAgICByZXR1cm4gJycgKyBwY3RbMF07XG4gIH1cblxuICBnZXQgaXNIb3Jpem9udGFsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gIH1cblxuICBnZXQgaXNWZXJ0aWNhbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZikge31cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zaG93VGlja3MpIHtcbiAgICAgIHRoaXMuX3RpY2tzID0gdGhpcy5nZXRUaWNrcygpO1xuICAgIH1cbiAgICB0aGlzLnNldFZhbHVlcyhbMF0pO1xuICB9XG5cbiAgc2V0VmFsdWVzKHZhbHVlczogbnVtYmVyW10pIHtcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdGhpcy5fcGVyY2VudHMgPSB2YWx1ZXNcbiAgICAgIC5tYXAodiA9PiBNYXRoLm1heCh0aGlzLm1pbiwgTWF0aC5taW4odGhpcy5tYXgsIHYpKSlcbiAgICAgIC5tYXAodiA9PiBNYXRoLnJvdW5kKCgxMDAgKiAodiAtIHRoaXMubWluKSkgLyAodGhpcy5tYXggLSB0aGlzLm1pbikpKTtcblxuICAgIHRoaXMuX3RodW1icyA9IHRoaXMuX3BlcmNlbnRzLm1hcChwID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlZnQ6IGBjYWxjKCR7cH0lIC0gJHtwIC8gMTAwfWVtKWBcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5maWxsZWQpIHtcbiAgICAgIHRoaXMuX2ZpbGwgPSB0aGlzLmdldEZpbGwoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zaG93VGlja3MpIHtcbiAgICAgIHRoaXMuX3RpY2tzID0gdGhpcy5nZXRUaWNrcygpO1xuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZShpbmRleDogbnVtYmVyLCBhY3RpdmU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9hY3RpdmVbaW5kZXhdID0gYWN0aXZlO1xuICB9XG5cbiAgc2V0VmFsdWUodmFsOiBudW1iZXIsIGluZGV4OiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5fdmFsdWVzW2luZGV4XSAhPT0gdmFsKSB7XG4gICAgICB0aGlzLl92YWx1ZXNbaW5kZXhdID0gdmFsO1xuICAgICAgdGhpcy5zZXRWYWx1ZXModGhpcy5fdmFsdWVzKTtcbiAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh0aGlzLnZhbHVlKTtcblxuICAgICAgdGhpcy5jaGFuZ2UuZW1pdCh7XG4gICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgICBwZXJjZW50OiB0aGlzLnBlcmNlbnRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldENvdW50KCk6IGFueSB7XG4gICAgY29uc3QgaWR4cyA9IFtdO1xuICAgIGNvbnN0IHN0ZXAgPSB0aGlzLnRpY2tTdGVwIHx8IHRoaXMuc3RlcDtcblxuICAgIGxldCBpID0gdGhpcy5taW47XG4gICAgd2hpbGUgKGkgPD0gdGhpcy5tYXgpIHtcbiAgICAgIGlkeHMucHVzaChpKTtcbiAgICAgIGkgKz0gc3RlcDtcbiAgICB9XG5cbiAgICByZXR1cm4gaWR4cztcbiAgfVxuXG4gIGdldFRpY2tzKCk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q291bnQoKS5tYXAocCA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsZWZ0OiBgY2FsYygke3B9JSAtICR7cCAvIDEwMCAtIDAuNX1lbSlgXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0RmlsbCgpOiBhbnkge1xuICAgIGlmICh0aGlzLmZpbGxlZCkge1xuICAgICAgY29uc3QgcGVyY2VudE1pbiA9IHRoaXMubXVsdGlwbGUgPyBNYXRoLm1pbiguLi50aGlzLl9wZXJjZW50cykgOiAwO1xuICAgICAgY29uc3QgcGVyY2VudE1heCA9IHRoaXMubXVsdGlwbGUgPyBNYXRoLm1heCguLi50aGlzLl9wZXJjZW50cykgOiB0aGlzLl9wZXJjZW50c1swXTtcbiAgICAgIGNvbnN0IHdpZHRoID0gcGVyY2VudE1heCAtIHBlcmNlbnRNaW47XG5cbiAgICAgIGlmIChlZGdlICYmIHRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsZWZ0OiBgY2FsYygke3BlcmNlbnRNaW59JSAtICR7cGVyY2VudE1pbiAvIDEwMCAtIDAuNX1lbSlgLFxuICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnOiBgY2FsYygke3dpZHRofSUgLSAke3dpZHRoIC8gMTAwfWVtKSAxMDAlYFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVmdDogYCR7cGVyY2VudE1pbn0lYCxcbiAgICAgICAgJ2JhY2tncm91bmQtc2l6ZSc6IGAke3dpZHRofSUgMTAwJWBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignbW91c2Vkb3duJywgWyckZXZlbnQnXSlcbiAgb25Nb3VzZURvd24oZXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdtb3VzZXVwJywgWyckZXZlbnQnXSlcbiAgb25Nb3VzZVVwKGV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgfVxuXG4gIG9uQ2hhbmdlKGV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB0aGlzLmNoYW5nZS5lbWl0KHtcbiAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgcGVyY2VudDogdGhpcy5wZXJjZW50XG4gICAgfSk7XG4gIH1cblxuICB3cml0ZVZhbHVlKHZhbCk6IHZvaWQge1xuICAgIHZhbCA9IHZhbCA/IFN0cmluZyh2YWwpLnNwbGl0KCcsJykgOiBbJzAnXTtcbiAgICBpZiAoU3RyaW5nKHZhbCkgIT09IFN0cmluZyh0aGlzLl92YWx1ZXMpKSB7XG4gICAgICB0aGlzLnNldFZhbHVlcyh2YWwubWFwKHYgPT4gK3YpKTtcbiAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSBmbjtcbiAgfVxuXG4gIHRyYWNrSW5kZXgoaW5kZXgpIHtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBvbkNoYW5nZUNhbGxiYWNrOiAoXzogYW55KSA9PiB2b2lkID0gKCkgPT4ge1xuICAgIC8vIHBsYWNlaG9sZGVyXG4gIH07XG5cbiAgb25Ub3VjaGVkQ2FsbGJhY2s6IChfOiBhbnkpID0+IHZvaWQgPSAoKSA9PiB7XG4gICAgLy8gcGxhY2Vob2xkZXJcbiAgfTtcbn1cbiJdfQ==