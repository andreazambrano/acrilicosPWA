import { __decorate, __metadata } from "tslib";
import { Component, Input, Output, EventEmitter, HostListener, ViewEncapsulation, ChangeDetectionStrategy, TemplateRef } from '@angular/core';
import { coerceNumberProperty, coerceBooleanProperty } from '@angular/cdk/coercion';
import { trigger } from '@angular/animations';
import { DRAWER_ANIMATION } from './drawer.animation';
import { DrawerDirection } from './drawer-direction.enum';
import { DrawerPosition } from './drawer-position.enum';
var DrawerComponent = /** @class */ (function () {
    function DrawerComponent() {
        this.cssClass = '';
        this.isRoot = true;
        this.close = new EventEmitter();
        this.position = DrawerPosition.fixed;
    }
    Object.defineProperty(DrawerComponent.prototype, "size", {
        get: function () {
            return this._size;
        },
        set: function (val) {
            this._size = coerceNumberProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DrawerComponent.prototype, "zIndex", {
        get: function () {
            return this._zIndex;
        },
        set: function (val) {
            this._zIndex = coerceNumberProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DrawerComponent.prototype, "closeOnOutsideClick", {
        get: function () {
            return this._closeOnOutsideClick;
        },
        set: function (val) {
            this._closeOnOutsideClick = coerceBooleanProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DrawerComponent.prototype, "cssClasses", {
        get: function () {
            var clz = "ngx-drawer " + this.cssClass;
            if (this.isLeft)
                clz += ' left-drawer';
            if (this.isBottom)
                clz += ' bottom-drawer';
            return clz;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DrawerComponent.prototype, "isLeft", {
        get: function () {
            return this.direction === DrawerDirection.Left;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DrawerComponent.prototype, "isBottom", {
        get: function () {
            return this.direction === DrawerDirection.Bottom;
        },
        enumerable: true,
        configurable: true
    });
    DrawerComponent.prototype.ngOnInit = function () {
        this.position = this.isRoot ? DrawerPosition.fixed : DrawerPosition.absolute;
        this.setDimensions(this.size);
    };
    DrawerComponent.prototype.ngOnDestroy = function () {
        this.close.emit(true);
    };
    DrawerComponent.prototype.setDimensions = function (size) {
        this.heightSize = (this.isBottom && size ? size : 100) + "%";
        this.widthSize = (this.isLeft && size ? size : 100) + "%";
    };
    DrawerComponent.prototype.onEscapeKey = function () {
        this.close.emit(true);
    };
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], DrawerComponent.prototype, "cssClass", void 0);
    __decorate([
        Input(),
        __metadata("design:type", String)
    ], DrawerComponent.prototype, "direction", void 0);
    __decorate([
        Input(),
        __metadata("design:type", TemplateRef)
    ], DrawerComponent.prototype, "template", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], DrawerComponent.prototype, "context", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Boolean)
    ], DrawerComponent.prototype, "isRoot", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], DrawerComponent.prototype, "size", null);
    __decorate([
        Input(),
        __metadata("design:type", Number),
        __metadata("design:paramtypes", [Number])
    ], DrawerComponent.prototype, "zIndex", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], DrawerComponent.prototype, "closeOnOutsideClick", null);
    __decorate([
        Output(),
        __metadata("design:type", Object)
    ], DrawerComponent.prototype, "close", void 0);
    __decorate([
        HostListener('keyup.esc'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], DrawerComponent.prototype, "onEscapeKey", null);
    DrawerComponent = __decorate([
        Component({
            exportAs: 'ngxDrawer',
            selector: 'ngx-drawer',
            template: "<div class=\"ngx-drawer-content\">\n  <ng-template [ngTemplateOutlet]=\"template\" [ngTemplateOutletContext]=\"{ context: context, close: close }\">\n  </ng-template>\n</div>\n",
            animations: [trigger('drawerTransition', DRAWER_ANIMATION)],
            host: {
                role: 'dialog',
                tabindex: '-1',
                '[class]': 'cssClasses',
                '[style.width]': 'widthSize',
                '[style.height]': 'heightSize',
                '[style.zIndex]': 'zIndex',
                '[style.position]': 'position',
                '[@drawerTransition]': 'direction'
            },
            encapsulation: ViewEncapsulation.None,
            changeDetection: ChangeDetectionStrategy.OnPush,
            styles: [".ngx-drawer{display:block;overflow-y:auto;overflow-x:hidden;text-align:left;z-index:998;background:#1c2029}.ngx-drawer.left-drawer{top:0;right:0;height:100%}.ngx-drawer.bottom-drawer{left:0;bottom:0;width:100%}"]
        })
    ], DrawerComponent);
    return DrawerComponent;
}());
export { DrawerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhd2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bzd2ltbGFuZS9uZ3gtdWkvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9kcmF3ZXIvZHJhd2VyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFlBQVksRUFDWixZQUFZLEVBQ1osaUJBQWlCLEVBRWpCLHVCQUF1QixFQUN2QixXQUFXLEVBRVosTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLG9CQUFvQixFQUFFLHFCQUFxQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEYsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRTlDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFxQnhEO0lBQUE7UUFDVyxhQUFRLEdBQVcsRUFBRSxDQUFDO1FBSXRCLFdBQU0sR0FBWSxJQUFJLENBQUM7UUEwQnRCLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBVyxDQUFDO1FBVzlDLGFBQVEsR0FBbUIsY0FBYyxDQUFDLEtBQUssQ0FBQztJQWdDbEQsQ0FBQztJQWxFQyxzQkFBSSxpQ0FBSTthQUFSO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7YUFDRCxVQUFTLEdBQVc7WUFDbEIsSUFBSSxDQUFDLEtBQUssR0FBRyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QyxDQUFDOzs7T0FIQTtJQU1ELHNCQUFJLG1DQUFNO2FBQVY7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDdEIsQ0FBQzthQUNELFVBQVcsR0FBVztZQUNwQixJQUFJLENBQUMs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a0IsRUFBRSxVQUFVO2dCQUM5QixxQkFBcUIsRUFBRSxXQUFXO2FBQ25DO1lBQ0QsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7WUFDckMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07O1NBQ2hELENBQUM7T0FDVyxlQUFlLENBMEUzQjtJQUFELHNCQUFDO0NBQUEsQUExRUQsSUEwRUM7U0ExRVksZUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgRXZlbnRFbWl0dGVyLFxuICBIb3N0TGlzdGVuZXIsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxuICBPbkRlc3Ryb3ksXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBUZW1wbGF0ZVJlZixcbiAgT25Jbml0XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgY29lcmNlTnVtYmVyUHJvcGVydHksIGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XG5pbXBvcnQgeyB0cmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5cbmltcG9ydCB7IERSQVdFUl9BTklNQVRJT04gfSBmcm9tICcuL2RyYXdlci5hbmltYXRpb24nO1xuaW1wb3J0IHsgRHJhd2VyRGlyZWN0aW9uIH0gZnJvbSAnLi9kcmF3ZXItZGlyZWN0aW9uLmVudW0nO1xuaW1wb3J0IHsgRHJhd2VyUG9zaXRpb24gfSBmcm9tICcuL2RyYXdlci1wb3NpdGlvbi5lbnVtJztcblxuQENvbXBvbmVudCh7XG4gIGV4cG9ydEFzOiAnbmd4RHJhd2VyJyxcbiAgc2VsZWN0b3I6ICduZ3gtZHJhd2VyJyxcbiAgdGVtcGxhdGVVcmw6ICdkcmF3ZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9kcmF3ZXIuY29tcG9uZW50LnNjc3MnXSxcbiAgYW5pbWF0aW9uczogW3RyaWdnZXIoJ2RyYXdlclRyYW5zaXRpb24nLCBEUkFXRVJfQU5JTUFUSU9OKV0sXG4gIGhvc3Q6IHtcbiAgICByb2xlOiAnZGlhbG9nJyxcbiAgICB0YWJpbmRleDogJy0xJyxcbiAgICAnW2NsYXNzXSc6ICdjc3NDbGFzc2VzJyxcbiAgICAnW3N0eWxlLndpZHRoXSc6ICd3aWR0aFNpemUnLFxuICAgICdbc3R5bGUuaGVpZ2h0XSc6ICdoZWlnaHRTaXplJyxcbiAgICAnW3N0eWxlLnpJbmRleF0nOiAnekluZGV4JyxcbiAgICAnW3N0eWxlLnBvc2l0aW9uXSc6ICdwb3NpdGlvbicsXG4gICAgJ1tAZHJhd2VyVHJhbnNpdGlvbl0nOiAnZGlyZWN0aW9uJ1xuICB9LFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBEcmF3ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIEBJbnB1dCgpIGNzc0NsYXNzOiBzdHJpbmcgPSAnJztcbiAgQElucHV0KCkgZGlyZWN0aW9uOiBEcmF3ZXJEaXJlY3Rpb247XG4gIEBJbnB1dCgpIHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBASW5wdXQoKSBjb250ZXh0OiBhbnk7XG4gIEBJbnB1dCgpIGlzUm9vdDogYm9vbGVhbiA9IHRydWU7XG5cbiAgQElucHV0KClcbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gIH1cbiAgc2V0IHNpemUodmFsOiBudW1iZXIpIHtcbiAgICB0aGlzLl9zaXplID0gY29lcmNlTnVtYmVyUHJvcGVydHkodmFsKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCB6SW5kZXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3pJbmRleDtcbiAgfVxuICBzZXQgekluZGV4KHZhbDogbnVtYmVyKSB7XG4gICAgdGhpcy5fekluZGV4ID0gY29lcmNlTnVtYmVyUHJvcGVydHkodmFsKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBjbG9zZU9uT3V0c2lkZUNsaWNrKCkge1xuICAgIHJldHVybiB0aGlzLl9jbG9zZU9uT3V0c2lkZUNsaWNrO1xuICB9XG4gIHNldCBjbG9zZU9uT3V0c2lkZUNsaWNrKHZhbDogYm9vbGVhbikge1xuICAgIHRoaXMuX2Nsb3NlT25PdXRzaWRlQ2xpY2sgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsKTtcbiAgfVxuXG4gIEBPdXRwdXQoKSBjbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblxuICBnZXQgY3NzQ2xhc3NlcygpOiBzdHJpbmcge1xuICAgIGxldCBjbHogPSBgbmd4LWRyYXdlciAke3RoaXMuY3NzQ2xhc3N9YDtcbiAgICBpZiAodGhpcy5pc0xlZnQpIGNseiArPSAnIGxlZnQtZHJhd2VyJztcbiAgICBpZiAodGhpcy5pc0JvdHRvbSkgY2x6ICs9ICcgYm90dG9tLWRyYXdlcic7XG4gICAgcmV0dXJuIGNsejtcbiAgfVxuXG4gIHdpZHRoU2l6ZTogc3RyaW5nIHwgbnVtYmVyO1xuICBoZWlnaHRTaXplOiBzdHJpbmcgfCBudW1iZXI7XG4gIHBvc2l0aW9uOiBEcmF3ZXJQb3NpdGlvbiA9IERyYXdlclBvc2l0aW9uLmZpeGVkO1xuXG4gIHByaXZhdGUgZ2V0IGlzTGVmdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24gPT09IERyYXdlckRpcmVjdGlvbi5MZWZ0O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgaXNCb3R0b20oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uID09PSBEcmF3ZXJEaXJlY3Rpb24uQm90dG9tO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2l6ZTogbnVtYmVyO1xuICBwcml2YXRlIF96SW5kZXg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfY2xvc2VPbk91dHNpZGVDbGljazogYm9vbGVhbjtcblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5pc1Jvb3QgPyBEcmF3ZXJQb3NpdGlvbi5maXhlZCA6IERyYXdlclBvc2l0aW9uLmFic29sdXRlO1xuICAgIHRoaXMuc2V0RGltZW5zaW9ucyh0aGlzLnNpemUpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5jbG9zZS5lbWl0KHRydWUpO1xuICB9XG5cbiAgc2V0RGltZW5zaW9ucyhzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmhlaWdodFNpemUgPSBgJHt0aGlzLmlzQm90dG9tICYmIHNpemUgPyBzaXplIDogMTAwfSVgO1xuICAgIHRoaXMud2lkdGhTaXplID0gYCR7dGhpcy5pc0xlZnQgJiYgc2l6ZSA/IHNpemUgOiAxMDB9JWA7XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdrZXl1cC5lc2MnKVxuICBvbkVzY2FwZUtleSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsb3NlLmVtaXQodHJ1ZSk7XG4gIH1cbn1cbiJdfQ==