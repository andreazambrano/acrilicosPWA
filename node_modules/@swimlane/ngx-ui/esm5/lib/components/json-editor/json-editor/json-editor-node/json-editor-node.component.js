import { __decorate, __extends, __metadata } from "tslib";
import { Component, ViewEncapsulation, Input, ChangeDetectionStrategy } from '@angular/core';
import { JsonEditorNode } from '../../json-editor-node';
import { DialogService } from '../../../dialog/dialog.service';
var JsonEditorNodeComponent = /** @class */ (function (_super) {
    __extends(JsonEditorNodeComponent, _super);
    function JsonEditorNodeComponent(dialogMngr) {
        var _this = _super.call(this, dialogMngr) || this;
        _this.dialogMngr = dialogMngr;
        _this.placeholder = '';
        return _this;
    }
    JsonEditorNodeComponent.prototype.ngOnInit = function () {
        _super.prototype.ngOnInit.call(this);
        if (this.schema.examples && Array.isArray(this.schema.examples)) {
            this.placeholder = this.schema.examples.join(', ');
        }
    };
    JsonEditorNodeComponent.ctorParameters = function () { return [
        { type: DialogService }
    ]; };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], JsonEditorNodeComponent.prototype, "model", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], JsonEditorNodeComponent.prototype, "schema", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], JsonEditorNodeComponent.prototype, "typeCheckOverrides", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Array)
    ], JsonEditorNodeComponent.prototype, "errors", void 0);
    JsonEditorNodeComponent = __decorate([
        Component({
            selector: 'ngx-json-editor-node',
            template: "<div\n  class=\"json-tree-node\"\n  [class.inline]=\"schema?.type !== 'object' && schema?.type !== 'array'\"\n  [class.invalid]=\"!valid\"\n  [class.children-invalid]=\"!childrenValid\"\n>\n  <span\n    *ngIf=\"schema?.type === 'object' || schema?.type === 'array'\"\n    class=\"ngx-expander\"\n    (click)=\"onExpandClick()\"\n    [class.invalid]=\"!childrenValid\"\n    [ngClass]=\"{\n      'icon-tree-collapse': expanded,\n      'icon-tree-expand': !expanded\n    }\"\n  >\n  </span>\n\n  <ngx-icon\n    fontIcon=\"warning-filled\"\n    *ngIf=\"ownErrors.length > 0\"\n    class=\"error-icon\"\n    ngx-tooltip\n    [tooltipTemplate]=\"errorsTemplate\"\n    tooltipPlacement=\"top\"\n  ></ngx-icon>\n  <ng-template #errorsTemplate>\n    <div *ngFor=\"let error of ownErrors\">{{ error.message }}</div>\n  </ng-template>\n\n  <div *ngIf=\"model !== undefined\" [class.invalid]=\"!valid\">\n    <!-- Object -->\n    <div *ngIf=\"schema?.type === 'object'\">\n      <ngx-json-object-node\n        [schema]=\"schema\"\n        [model]=\"model\"\n        [expanded]=\"expanded\"\n        (modelChange)=\"updateModel($event)\"\n        [path]=\"path\"\n        [errors]=\"childrenErrors\"\n        [typeCheckOverrides]=\"typeCheckOverrides\"\n      ></ngx-json-object-node>\n    </div>\n\n    <!-- Array -->\n    <div *ngIf=\"schema?.type === 'array'\">\n      <ngx-json-array-node\n        [schema]=\"schema\"\n        [model]=\"model\"\n        [expanded]=\"expanded\"\n        (modelChange)=\"updateModel($event)\"\n        [path]=\"path\"\n        [errors]=\"childrenErrors\"\n        [typeCheckOverrides]=\"typeCheckOverrides\"\n      ></ngx-json-array-node>\n    </div>\n\n    <!-- Number | Integer -->\n    <div *ngIf=\"schema?.type === 'number' || schema?.type === 'integer'\">\n      <input\n        class=\"value-input\"\n        type=\"number\"\n        [placeholder]=\"placeholder\"\n        [ngModel]=\"model\"\n        (ngModelChange)=\"updateModel($event)\"\n        [required]=\"required\"\n      />\n    </div>\n\n    <!-- Boolean -->\n    <div *ngIf=\"schema?.type === 'boolean'\">\n      <ngx-toggle class=\"toggle-input\" [ngModel]=\"model\" (ngModelChange)=\"updateModel($event)\" [label]=\"model | json\">\n      </ngx-toggle>\n    </div>\n\n    <!-- String -->\n    <ng-container *ngIf=\"schema?.type === 'string'\">\n      <!-- No format -->\n      <div *ngIf=\"!schema.format\">\n        <input\n          *ngIf=\"!schema?.enum\"\n          class=\"value-input\"\n          type=\"text\"\n          [placeholder]=\"placeholder\"\n          [ngModel]=\"model\"\n          (ngModelChange)=\"updateModel($event)\"\n          [required]=\"required\"\n        />\n        <select *ngIf=\"schema?.enum\" class=\"value-input select\" [ngModel]=\"model\" (ngModelChange)=\"updateModel($event)\">\n          <option *ngFor=\"let option of schema.enum\" [value]=\"option\">{{ option }}</option>\n        </select>\n      </div>\n\n      <!-- Password -->\n      <div *ngIf=\"schema.format === 'password'\">\n        <input\n          class=\"value-input\"\n          type=\"password\"\n          [placeholder]=\"placeholder\"\n          [ngModel]=\"model\"\n          (ngModelChange)=\"updateModel($event)\"\n          [required]=\"required\"\n        />\n      </div>\n\n      <!-- Date -->\n      <div *ngIf=\"schema.format === 'date'\">\n        <input\n          class=\"value-input\"\n          type=\"date\"\n          [placeholder]=\"placeholder\"\n          [ngModel]=\"model\"\n          (ngModelChange)=\"updateModel($event)\"\n          [required]=\"required\"\n        />\n      </div>\n\n      <!-- DateTime -->\n      <div *ngIf=\"schema.format === 'date-time'\">\n        <input\n          class=\"value-input\"\n          type=\"datetime-local\"\n          [placeholder]=\"placeholder\"\n          [ngModel]=\"model\"\n          (ngModelChange)=\"updateModel($event)\"\n          [required]=\"required\"\n        />\n      </div>\n\n      <!-- Code -->\n      <div *ngIf=\"schema.format === 'code'\">\n        <div class=\"value-input code\">\n          <ngx-icon\n            fontIcon=\"edit\"\n            class=\"edit-code-icon\"\n            ngx-tooltip\n            tooltipTitle=\"Edit Code\"\n            (click)=\"openCodeEditor()\"\n          ></ngx-icon>\n          <div class=\"code-display\">{{ model }}</div>\n        </div>\n      </div>\n\n      <ng-template #codeEditorTpl>\n        <div class=\"code-editor\">\n          <ngx-select\n            class=\"mode-select\"\n            label=\"Language Mode\"\n            [ngModel]=\"[editorConfig.mode.name]\"\n            (ngModelChange)=\"selectEditorMode($event[0])\"\n          >\n            <ngx-select-option *ngFor=\"let mode of editorModes\" [name]=\"mode.label\" [value]=\"mode.name\">\n            </ngx-select-option>\n          </ngx-select>\n\n          <ngx-button class=\"btn btn-primary save-code-button\" (click)=\"updateModel(editorModel); closeCodeEditor()\">\n            Save</ngx-button\n          >\n\n          <ngx-codemirror\n            *ngIf=\"editorVisible\"\n            [ngModel]=\"editorModel\"\n            (ngModelChange)=\"editorModel = $event\"\n            [config]=\"editorConfig\"\n            class=\"code-editor\"\n          >\n          </ngx-codemirror>\n        </div>\n      </ng-template>\n    </ng-container>\n  </div>\n\n  <div class=\"ngx-tree-vr\" *ngIf=\"schema?.type === 'object' || schema?.type === 'array'\"></div>\n</div>\n",
            encapsulation: ViewEncapsulation.None,
            changeDetection: ChangeDetectionStrategy.OnPush,
            styles: [".json-tree-node{padding:0;margin-left:25px;margin-bottom:0;position:relative;white-space:nowrap}.json-tree-node.inline{display:inline-block;margin-bottom:0;vertical-align:top;width:calc(100% - 290px)}.json-tree-node.inline::before{position:absolute;content:'=';left:-19px;font-size:20px;color:#5a6884}.json-tree-node.inline.inline .error-icon{left:initial;right:-22px;top:5px}.json-tree-node .btn{cursor:pointer}.json-tree-node .ngx-expander{font-size:.75rem;color:#afb7c8;position:absolute;top:-25px;left:-26px;z-index:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.json-tree-node .ngx-expander:not(.disabled){cursor:pointer}.json-tree-node .ngx-expander.icon-tree-collapse::before,.json-tree-node .ngx-expander.icon-tree-expand::before{background:#1c2029;border-radius:50%}.json-tree-node .ngx-expander.invalid{color:#e02f00}.json-tree-node .add-button{position:relative;left:20px;width:21px;height:21px;padding:2px 3px;background:#909cb4}.json-tree-node .add-button ngx-icon{color:#1c2029}.json-tree-node .add-button::before{content:' ';width:15px;height:1px;border-radius:5px;background:0 0;border-top:1px dashed #5a6884;position:absolute;top:50%;left:-15px}.json-tree-node .ngx-tree-vr{position:absolute;top:-4px;bottom:14px;left:5px;border-left:1px dashed #5a6884;width:1px}.json-tree-node .property-def{border:1px solid rgba(148,198,255,.07);height:30px;display:inline-block;margin-left:20px;position:relative;background:rgba(148,198,255,.05)}.json-tree-node .property-def::before{content:' ';width:15px;height:1px;border-radius:5px;background:0 0;border-top:1px dashed #5a6884;position:absolute;top:50%;left:-15px}.json-tree-node .property-def .type-icon{width:28px;height:28px;position:relative;background:rgba(148,198,255,.07);margin-left:0;display:inline-block}.json-tree-node .property-def .type-icon ngx-icon{color:#afb7c8;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:16px;height:16px}.json-tree-node .property-def .type-icon:hover{background:rgba(148,198,255,.17)}.json-tree-node .property-def .property-name{display:inline-block;width:170px;padding:0 5px;position:relative;-webkit-transform:translateY(-50%);transform:translateY(-50%);vertical-align:middle}.json-tree-node .property-def .property-name .title{display:inline-block;color:#72819f;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:relative;top:5px}.json-tree-node .property-def .property-name input{border:none;background:0 0;color:#bec5d3;width:calc(100% - 5px);line-height:20px;font-size:14px}.json-tree-node .error-icon{position:absolute;top:-28px;left:205px;color:#e02f00}.json-tree-node .value-input{border:1px solid rgba(148,198,255,.07);background:rgba(148,198,255,.05);color:#bec5d3;width:100%;height:30px;padding:5px;border-radius:0}.json-tree-node .value-input.select *{background-color:#313847}.json-tree-node .value-input.code{width:100%;overflow:hidden}.json-tree-node .value-input.code .code-display{white-space:pre-wrap;font-family:'Courier New',Courier,monospace;font-size:14px}.json-tree-node .value-input.code .edit-code-icon{position:absolute;right:10px;top:4px;z-index:21;cursor:pointer;display:none}.json-tree-node .value-input.code .edit-code-icon:hover{color:#fff}.json-tree-node .value-input.code:hover{height:auto;overflow:auto;max-height:400px;min-height:30px;position:absolute;z-index:20;background:#212631}.json-tree-node .value-input.code:hover .edit-code-icon{display:inline}.json-tree-node .ngx-toggle{margin:0;line-height:30px}.json-tree-node .ngx-toggle .ngx-toggle-text{color:#bec5d3}.json-tree-node .invalid>div>.value-input{border:1px solid #e02f00}"]
        }),
        __metadata("design:paramtypes", [DialogService])
    ], JsonEditorNodeComponent);
    return JsonEditorNodeComponent;
}(JsonEditorNode));
export { JsonEditorNodeComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNvbi1lZGl0b3Itbm9kZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3dpbWxhbmUvbmd4LXVpLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvanNvbi1lZGl0b3IvanNvbi1lZGl0b3IvanNvbi1lZGl0b3Itbm9kZS9qc29uLWVkaXRvci1ub2RlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDN0YsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRXhELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQVUvRDtJQUE2QywyQ0FBYztJQVd6RCxpQ0FBbUIsVUFBeUI7UUFBNUMsWUFDRSxrQkFBTSxVQUFVLENBQUMsU0FDbEI7UUFGa0IsZ0JBQVUsR0FBVixVQUFVLENBQWU7UUFGNUMsaUJBQVcsR0FBVyxFQUFFLENBQUM7O0lBSXpCLENBQUM7SUFFRCwwQ0FBUSxHQUFSO1FBQ0UsaUJBQU0sUUFBUSxXQUFFLENBQUM7UUFFakIsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDL0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDcEQ7SUFDSCxDQUFDOztnQkFWOEIsYUFBYTs7SUFWbkM7UUFBUixLQUFLLEVBQUU7OzBEQUFZO0lBRVg7UUFBUixLQUFLLEVBQUU7OzJEQUEwQjtJQUV6QjtRQUFSLEtBQUssRUFBRTs7dUVBQTBCO0lBRXpCO1FBQVIsS0FBSyxFQUFFOzsyREFBZTtJQVBaLHVCQUF1QjtRQVBuQyxTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsc0JBQXNCO1lBQ2hDLDIyS0FBOEM7WUFFOUMsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7WUFDckMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07O1NBQ2hELENBQUM7eUNBWStCLGFBQWE7T0FYakMsdUJBQXVCLENBc0JuQztJQUFELDhCQUFDO0NBQUEsQUF0QkQsQ0FBNkMsY0FBYyxHQXNCMUQ7U0F0QlksdUJBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3RW5jYXBzdWxhdGlvbiwgSW5wdXQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBKc29uRWRpdG9yTm9kZSB9IGZyb20gJy4uLy4uL2pzb24tZWRpdG9yLW5vZGUnO1xuXG5pbXBvcnQgeyBEaWFsb2dTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vZGlhbG9nL2RpYWxvZy5zZXJ2aWNlJztcbmltcG9ydCB7IEpTT05FZGl0b3JTY2hlbWEgfSBmcm9tICcuLi8uLi9qc29uLWVkaXRvci5oZWxwZXInO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZ3gtanNvbi1lZGl0b3Itbm9kZScsXG4gIHRlbXBsYXRlVXJsOiAnanNvbi1lZGl0b3Itbm9kZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2pzb24tZWRpdG9yLW5vZGUuY29tcG9uZW50LnNjc3MnXSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgSnNvbkVkaXRvck5vZGVDb21wb25lbnQgZXh0ZW5kcyBKc29uRWRpdG9yTm9kZSB7XG4gIEBJbnB1dCgpIG1vZGVsOiBhbnk7XG5cbiAgQElucHV0KCkgc2NoZW1hOiBKU09ORWRpdG9yU2NoZW1hO1xuXG4gIEBJbnB1dCgpIHR5cGVDaGVja092ZXJyaWRlcz86IGFueTtcblxuICBASW5wdXQoKSBlcnJvcnM6IGFueVtdO1xuXG4gIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnJztcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgZGlhbG9nTW5ncjogRGlhbG9nU2VydmljZSkge1xuICAgIHN1cGVyKGRpYWxvZ01uZ3IpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcblxuICAgIGlmICh0aGlzLnNjaGVtYS5leGFtcGxlcyAmJiBBcnJheS5pc0FycmF5KHRoaXMuc2NoZW1hLmV4YW1wbGVzKSkge1xuICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHRoaXMuc2NoZW1hLmV4YW1wbGVzLmpvaW4oJywgJyk7XG4gICAgfVxuICB9XG59XG4iXX0=