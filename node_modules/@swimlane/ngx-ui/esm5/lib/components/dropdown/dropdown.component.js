import { __decorate, __metadata } from "tslib";
import { Component, Input, ContentChild, OnDestroy, AfterContentInit, Renderer2, ViewEncapsulation, ChangeDetectorRef, ChangeDetectionStrategy, HostListener } from '@angular/core';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { DropdownMenuDirective } from './dropdown-menu.directive';
import { DropdownToggleDirective } from './dropdown-toggle.directive';
var DropdownComponent = /** @class */ (function () {
    function DropdownComponent(renderer, cd) {
        this.renderer = renderer;
        this.cd = cd;
        this._open = false;
        this._showCaret = false;
        this._closeOnClick = true;
        this._closeOnOutsideClick = true;
        this._closeOnMouseLeave = false;
        this._leaveTimeout = null;
    }
    Object.defineProperty(DropdownComponent.prototype, "open", {
        get: function () {
            return this._open;
        },
        set: function (open) {
            this._open = coerceBooleanProperty(open);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DropdownComponent.prototype, "showCaret", {
        get: function () {
            return this._showCaret;
        },
        set: function (showCaret) {
            this._showCaret = coerceBooleanProperty(showCaret);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DropdownComponent.prototype, "closeOnClick", {
        get: function () {
            return this._closeOnClick;
        },
        set: function (closeOnClick) {
            this._closeOnClick = coerceBooleanProperty(closeOnClick);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DropdownComponent.prototype, "closeOnOutsideClick", {
        get: function () {
            return this._closeOnOutsideClick;
        },
        set: function (closeOnOutsideClick) {
            this._closeOnOutsideClick = coerceBooleanProperty(closeOnOutsideClick);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DropdownComponent.prototype, "closeOnMouseLeave", {
        get: function () {
            return this._closeOnMouseLeave;
        },
        set: function (val) {
            this._closeOnMouseLeave = coerceBooleanProperty(val);
        },
        enumerable: true,
        configurable: true
    });
    DropdownComponent.prototype.ngAfterContentInit = function () {
        var _this = this;
        if (this.dropdownToggle) {
            this.dropdownToggle.toggle.subscribe(function (ev) { return _this.onToggleClick(ev); });
        }
    };
    DropdownComponent.prototype.ngOnDestroy = function () {
        if (this._documentListener)
            this._documentListener();
    };
    DropdownComponent.prototype.onDocumentClick = function (e) {
        if (this.open && this.closeOnOutsideClick) {
            var isToggling = this.dropdownToggle.element.contains(e.target);
            var isMenuClick = !this.closeOnClick && this.dropdownMenu.element.contains(e.target);
            if (!isToggling && !isMenuClick) {
                this.close();
            }
        }
    };
    DropdownComponent.prototype.onToggleClick = function (_) {
        this.open = !this.open;
        if (this.open) {
            this._documentListener = this.renderer.listen(document, 'click', this.onDocumentClick.bind(this));
        }
        else {
            this._documentListener();
        }
    };
    DropdownComponent.prototype.onMouseLeave = function () {
        var _this = this;
        if (this.closeOnMouseLeave) {
            this._leaveTimeout = setTimeout(function () {
                _this.close();
            }, 1000);
        }
    };
    DropdownComponent.prototype.onMouseEnter = function () {
        if (this._leaveTimeout) {
            clearTimeout(this._leaveTimeout);
        }
    };
    DropdownComponent.prototype.close = function () {
        this.open = false;
        if (this._documentListener)
            this._documentListener();
        this.cd.markForCheck();
    };
    DropdownComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ChangeDetectorRef }
    ]; };
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], DropdownComponent.prototype, "open", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], DropdownComponent.prototype, "showCaret", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], DropdownComponent.prototype, "closeOnClick", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], DropdownComponent.prototype, "closeOnOutsideClick", null);
    __decorate([
        Input(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], DropdownComponent.prototype, "closeOnMouseLeave", null);
    __decorate([
        ContentChild(DropdownToggleDirective),
        __metadata("design:type", DropdownToggleDirective)
    ], DropdownComponent.prototype, "dropdownToggle", void 0);
    __decorate([
        ContentChild(DropdownMenuDirective),
        __metadata("design:type", DropdownMenuDirective)
    ], DropdownComponent.prototype, "dropdownMenu", void 0);
    __decorate([
        HostListener('mouseleave'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], DropdownComponent.prototype, "onMouseLeave", null);
    __decorate([
        HostListener('mouseenter'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], DropdownComponent.prototype, "onMouseEnter", null);
    DropdownComponent = __decorate([
        Component({
            exportAs: 'ngxDropdown',
            selector: 'ngx-dropdown',
            template: "\n    <ng-content></ng-content>\n  ",
            host: {
                class: 'ngx-dropdown',
                '[class.open]': 'open',
                '[class.has-caret]': 'showCaret'
            },
            encapsulation: ViewEncapsulation.None,
            changeDetection: ChangeDetectionStrategy.OnPush,
            styles: [".ngx-dropdown{position:relative;padding-bottom:10px}.ngx-dropdown.open .ngx-dropdown-menu{display:block;opacity:1;-webkit-animation:.25s openAnimation;animation:.25s openAnimation}.ngx-dropdown.has-caret .ngx-dropdown-menu:before{display:block}.ngx-dropdown .ngx-dropdown-toggle{cursor:pointer;display:inline-block}.ngx-dropdown .ngx-dropdown-toggle.disabled,.ngx-dropdown .ngx-dropdown-toggle.disabled>a,.ngx-dropdown .ngx-dropdown-toggle.disabled>button{cursor:not-allowed}.ngx-dropdown .ngx-dropdown-menu{position:absolute;clear:left;top:100%;left:0;z-index:1000;min-width:180px;background:#313847;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 3px 3px -2px rgba(0,0,0,.12);margin-top:0;opacity:0;display:none;-webkit-transition:visibility,opacity .25s ease-out;transition:visibility,opacity .25s ease-out}.ngx-dropdown .ngx-dropdown-menu::before{z-index:-1;content:' ';display:none;position:absolute;left:10px;top:-6px;width:12px;height:12px;background:#313847;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-bottom:0;border-right:0}.ngx-dropdown .ngx-dropdown-menu.align-right{left:auto;right:0}.ngx-dropdown .ngx-dropdown-menu.align-right::before{left:auto;right:6px}.ngx-dropdown .ngx-dropdown-menu>ul>li>a,.ngx-dropdown .ngx-dropdown-menu>ul>li>button{padding:5px 20px;clear:both;line-height:1.42857143;white-space:nowrap;width:100%;text-align:left;background:0 0;box-shadow:none;color:#cfcfcf;font-size:.9em;display:block}.ngx-dropdown .ngx-dropdown-menu>ul>li:hover{background:#262c38}@-webkit-keyframes openAnimation{0%{-webkit-transform:translateY(-25px);transform:translateY(-25px)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes openAnimation{0%{-webkit-transform:translateY(-25px);transform:translateY(-25px)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline{background:#262c38;min-width:130px;font-size:13px;border:1px solid #505c75}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline:before{border-top:1px solid #505c75;border-left:1px solid #505c75;background:#262c38;z-index:10;top:-7px;-webkit-transform:translate(-1.8px,0) rotate(45deg);transform:translate(-1.8px,0) rotate(45deg)}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul{padding:9.5px 0;margin:2px 0 0;list-style:none}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul>li{padding-top:0!important;color:#fff}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul>li>a,.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul>li>button{cursor:pointer;height:26px;display:block;clear:both;font-weight:400;line-height:1.42857;white-space:nowrap;font-size:13px;color:#fff}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul>li:hover{background:#1f242f}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul>li.active{background:#479eff;color:#fff}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul>li.active>a,.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul>li.active>button{color:#fff}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-light-outline>ul>li.divider-label{height:initial;margin:8px 0;padding:0 20px;overflow:hidden;background-color:initial;color:#72819f}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline{background:#222732;min-width:130px;font-size:13px;border:1px solid #505c75}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline:before{border-top:1px solid #505c75;border-left:1px solid #505c75;background:#222732;z-index:10;top:-7px;-webkit-transform:translate(-1.8px,0) rotate(45deg);transform:translate(-1.8px,0) rotate(45deg)}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul{padding:9.5px 0;margin:2px 0 0;list-style:none}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul>li{padding-top:0!important;color:#afb7c8}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul>li>a,.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul>li>button{cursor:pointer;height:26px;display:block;clear:both;font-weight:400;line-height:1.42857;white-space:nowrap;font-size:13px;color:#afb7c8}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul>li:hover{background:#262c38}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul>li.active{background:#479eff;color:#afb7c8}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul>li.active>a,.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul>li.active>button{color:#fff}.ngx-dropdown .ngx-dropdown-menu.ngx-dropdown-dark-outline>ul>li.divider-label{height:initial;margin:8px 0;padding:0 20px;overflow:hidden;background-color:initial;color:#72819f}"]
        }),
        __metadata("design:paramtypes", [Renderer2, ChangeDetectorRef])
    ], DropdownComponent);
    return DropdownComponent;
}());
export { DropdownComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcGRvd24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHN3aW1sYW5lL25neC11aS8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2Ryb3Bkb3duL2Ryb3Bkb3duLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxLQUFLLEVBQ0wsWUFBWSxFQUNaLFNBQVMsRUFDVCxnQkFBZ0IsRUFDaEIsU0FBUyxFQUNULGlCQUFpQixFQUNqQixpQkFBaUIsRUFDakIsdUJBQXVCLEVBQ3ZCLFlBQVksRUFDYixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUU5RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUNsRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQWlCdEU7SUFvREUsMkJBQTZCLFFBQW1CLEVBQW1CLEVBQXFCO1FBQTNELGFBQVEsR0FBUixRQUFRLENBQVc7UUFBbUIsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFQaEYsVUFBSyxHQUFZLEtBQUssQ0FBQztRQUN2QixlQUFVLEdBQVksS0FBSyxDQUFDO1FBQzVCLGtCQUFhLEdBQVksSUFBSSxDQUFDO1FBQzlCLHlCQUFvQixHQUFZLElBQUksQ0FBQztRQUNyQyx1QkFBa0IsR0FBWSxLQUFLLENBQUM7UUFDcEMsa0JBQWEsR0FBRyxJQUFJLENBQUM7SUFFOEQsQ0FBQztJQWxENUYsc0JBQUksbUNBQUk7YUFBUjtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwQixDQUFDO2FBQ0QsVUFBUyxJQUFhO1lBQ3BCLElBQUksQ0FBQyxLQUFLLEdBQUcscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsQ0FBQzs7O09BSEE7SUFNRCxzQkFBSSx3Q0FBUzthQUFiO1lBQ0UsT0FBTyxJQUFJLENBQUMs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b25lbnQsXG4gIElucHV0LFxuICBDb250ZW50Q2hpbGQsXG4gIE9uRGVzdHJveSxcbiAgQWZ0ZXJDb250ZW50SW5pdCxcbiAgUmVuZGVyZXIyLFxuICBWaWV3RW5jYXBzdWxhdGlvbixcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBIb3N0TGlzdGVuZXJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBjb2VyY2VCb29sZWFuUHJvcGVydHkgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuXG5pbXBvcnQgeyBEcm9wZG93bk1lbnVEaXJlY3RpdmUgfSBmcm9tICcuL2Ryb3Bkb3duLW1lbnUuZGlyZWN0aXZlJztcbmltcG9ydCB7IERyb3Bkb3duVG9nZ2xlRGlyZWN0aXZlIH0gZnJvbSAnLi9kcm9wZG93bi10b2dnbGUuZGlyZWN0aXZlJztcblxuQENvbXBvbmVudCh7XG4gIGV4cG9ydEFzOiAnbmd4RHJvcGRvd24nLFxuICBzZWxlY3RvcjogJ25neC1kcm9wZG93bicsXG4gIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICBgLFxuICBzdHlsZVVybHM6IFsnLi9kcm9wZG93bi5jb21wb25lbnQuc2NzcyddLFxuICBob3N0OiB7XG4gICAgY2xhc3M6ICduZ3gtZHJvcGRvd24nLFxuICAgICdbY2xhc3Mub3Blbl0nOiAnb3BlbicsXG4gICAgJ1tjbGFzcy5oYXMtY2FyZXRdJzogJ3Nob3dDYXJldCdcbiAgfSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgRHJvcGRvd25Db21wb25lbnQgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRJbml0LCBPbkRlc3Ryb3kge1xuICBASW5wdXQoKVxuICBnZXQgb3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5fb3BlbjtcbiAgfVxuICBzZXQgb3BlbihvcGVuOiBib29sZWFuKSB7XG4gICAgdGhpcy5fb3BlbiA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShvcGVuKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBzaG93Q2FyZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Nob3dDYXJldDtcbiAgfVxuICBzZXQgc2hvd0NhcmV0KHNob3dDYXJldDogYm9vbGVhbikge1xuICAgIHRoaXMuX3Nob3dDYXJldCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShzaG93Q2FyZXQpO1xuICB9XG5cbiAgQElucHV0KClcbiAgZ2V0IGNsb3NlT25DbGljaygpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xvc2VPbkNsaWNrO1xuICB9XG4gIHNldCBjbG9zZU9uQ2xpY2soY2xvc2VPbkNsaWNrOiBib29sZWFuKSB7XG4gICAgdGhpcy5fY2xvc2VPbkNsaWNrID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGNsb3NlT25DbGljayk7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgY2xvc2VPbk91dHNpZGVDbGljaygpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xvc2VPbk91dHNpZGVDbGljaztcbiAgfVxuICBzZXQgY2xvc2VPbk91dHNpZGVDbGljayhjbG9zZU9uT3V0c2lkZUNsaWNrOiBib29sZWFuKSB7XG4gICAgdGhpcy5fY2xvc2VPbk91dHNpZGVDbGljayA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShjbG9zZU9uT3V0c2lkZUNsaWNrKTtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGdldCBjbG9zZU9uTW91c2VMZWF2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xvc2VPbk1vdXNlTGVhdmU7XG4gIH1cbiAgc2V0IGNsb3NlT25Nb3VzZUxlYXZlKHZhbDogYm9vbGVhbikge1xuICAgIHRoaXMuX2Nsb3NlT25Nb3VzZUxlYXZlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbCk7XG4gIH1cblxuICBAQ29udGVudENoaWxkKERyb3Bkb3duVG9nZ2xlRGlyZWN0aXZlKSByZWFkb25seSBkcm9wZG93blRvZ2dsZTogRHJvcGRvd25Ub2dnbGVEaXJlY3RpdmU7XG4gIEBDb250ZW50Q2hpbGQoRHJvcGRvd25NZW51RGlyZWN0aXZlKSByZWFkb25seSBkcm9wZG93bk1lbnU6IERyb3Bkb3duTWVudURpcmVjdGl2ZTtcblxuICBwcml2YXRlIF9kb2N1bWVudExpc3RlbmVyPzogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfb3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9zaG93Q2FyZXQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfY2xvc2VPbkNsaWNrOiBib29sZWFuID0gdHJ1ZTtcbiAgcHJpdmF0ZSBfY2xvc2VPbk91dHNpZGVDbGljazogYm9vbGVhbiA9IHRydWU7XG4gIHByaXZhdGUgX2Nsb3NlT25Nb3VzZUxlYXZlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2xlYXZlVGltZW91dCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSByZW5kZXJlcjogUmVuZGVyZXIyLCBwcml2YXRlIHJlYWRvbmx5IGNkOiBDaGFuZ2VEZXRlY3RvclJlZikge31cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZHJvcGRvd25Ub2dnbGUpIHtcbiAgICAgIHRoaXMuZHJvcGRvd25Ub2dnbGUudG9nZ2xlLnN1YnNjcmliZSgoZXY6IEV2ZW50KSA9PiB0aGlzLm9uVG9nZ2xlQ2xpY2soZXYpKTtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fZG9jdW1lbnRMaXN0ZW5lcikgdGhpcy5fZG9jdW1lbnRMaXN0ZW5lcigpO1xuICB9XG5cbiAgb25Eb2N1bWVudENsaWNrKGU6IEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3BlbiAmJiB0aGlzLmNsb3NlT25PdXRzaWRlQ2xpY2spIHtcbiAgICAgIGNvbnN0IGlzVG9nZ2xpbmcgPSB0aGlzLmRyb3Bkb3duVG9nZ2xlLmVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQgYXMgTm9kZSk7XG4gICAgICBjb25zdCBpc01lbnVDbGljayA9ICF0aGlzLmNsb3NlT25DbGljayAmJiB0aGlzLmRyb3Bkb3duTWVudS5lbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpO1xuXG4gICAgICBpZiAoIWlzVG9nZ2xpbmcgJiYgIWlzTWVudUNsaWNrKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvblRvZ2dsZUNsaWNrKF86IEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5vcGVuID0gIXRoaXMub3BlbjtcblxuICAgIGlmICh0aGlzLm9wZW4pIHtcbiAgICAgIHRoaXMuX2RvY3VtZW50TGlzdGVuZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbihkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5vbkRvY3VtZW50Q2xpY2suYmluZCh0aGlzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RvY3VtZW50TGlzdGVuZXIoKTtcbiAgICB9XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdtb3VzZWxlYXZlJylcbiAgb25Nb3VzZUxlYXZlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsb3NlT25Nb3VzZUxlYXZlKSB7XG4gICAgICB0aGlzLl9sZWF2ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignbW91c2VlbnRlcicpXG4gIG9uTW91c2VFbnRlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGVhdmVUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fbGVhdmVUaW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNsb3NlKCkge1xuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIGlmICh0aGlzLl9kb2N1bWVudExpc3RlbmVyKSB0aGlzLl9kb2N1bWVudExpc3RlbmVyKCk7XG4gICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgfVxufVxuIl19