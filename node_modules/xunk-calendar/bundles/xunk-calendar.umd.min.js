!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/material/icon"),require("@angular/material/button")):"function"==typeof define&&define.amd?define("xunk-calendar",["exports","@angular/core","@angular/common","@angular/material/icon","@angular/material/button"],e):e((t=t||self)["xunk-calendar"]={},t.ng.core,t.ng.common,t.ng.material.icon,t.ng.material.button)}(this,function(t,e,n,o,a){"use strict";var r=function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function i(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var h=function(){function t(){this.calendar=[[]],this.heatMapColor="#00ff00",this.primaryColor="#ff0000",this.primaryForeground="white",this.heatmap={},this.showHeader=!0,this.change=new e.EventEmitter,this.monthChange=new e.EventEmitter,this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thrusday","Friday","Saturday"],this.calendar=[],this.today=n.getToday(),this.openPage=r({},this.today),this.selectedDate=r({},this.today)}var n;return n=t,t.parseColor=function(t){var e=document.createElement("div");e.style.color=t,document.body.appendChild(e);var n=getComputedStyle(e).color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(document.body.removeChild(e),n)return{R:n[1],G:n[2],B:n[3]};throw new Error("Color "+t+" could not be parsed.")},t.getToday=function(){var t=new Date;return{date:t.getDate(),month:t.getMonth(),year:t.getFullYear()}},t.zeropad=function(t,e,n){void 0===n&&(n="0");var o=void 0!==n?n:"0",a=new Array(1+e).join(o);return(a+t).slice(-a.length)},t.prototype.ngOnInit=function(){this.RGB_HM=n.parseColor(this.heatMapColor),this.RGB_Primary=n.parseColor(this.primaryColor),this.RGB_Primary_FG=n.parseColor(this.primaryForeground),this.displayCalendar()},t.prototype.sameDate=function(t,e,n){return t===n.date&&e.month===n.month&&e.year===n.year},t.prototype.isFab=function(t){return this.sameDate(t,this.openPage,this.selectedDate)?"primary":""},t.prototype.isToday=function(t){return this.sameDate(t,this.openPage,this.today)?"primary":""},t.prototype.selectDay=function(t){this.selectedDate.date=t,this.selectedDate.month=this.openPage.month,this.selectedDate.year=this.openPage.year,this.change.emit(this.selectedDate)},t.prototype.changeMonth=function(t){this.openPage.month+=t,this.openPage.month>=12&&(this.openPage.month=0,this.openPage.year++),this.openPage.month<0&&(this.openPage.month=11,this.openPage.year--),this.displayCalendar(),this.monthChange.emit(this.openPage)},t.prototype.displayCalendar=function(){for(var t=[[]],e=this.openPage.month,n=this.openPage.year,o=new Date(n,e,0).getDay(),a=0,r=1,i=Number(this.getDaysOfMonth(e,n));r<=i;)o>6&&(o=0,t[++a]=[]),t[a][o++]=r++;this.calendar=t},t.prototype.getDaysOfMonth=function(t,e){return 1===t&&this.leapYear(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][t]},t.prototype.leapYear=function(t){return t%4==0&&t%100!=0||t%400==0},t.prototype.getHM=function(t){if(this.isFab(t))return"rgb("+this.RGB_Primary.R+", "+this.RGB_Primary.G+", "+this.RGB_Primary.B+")";var e=n.zeropad,o=e(this.openPage.year,4)+e(this.openPage.month+1,2)+e(t,2);return o in this.heatmap?"rgba("+this.RGB_HM.R+", "+this.RGB_HM.G+", "+this.RGB_HM.B+", "+this.heatmap[o]+")":"inherit"},t.prototype.getForeground=function(t){return this.isFab(t)?"rgb("+this.RGB_Primary_FG.R+", "+this.RGB_Primary_FG.G+", "+this.RGB_Primary_FG.B+")":this.isToday(t)?"rgb("+this.RGB_Primary.R+", "+this.RGB_Primary.G+", "+this.RGB_Primary.B+")":void 0},i([e.Input(),s("design:type",Object)],t.prototype,"today",void 0),i([e.Input(),s("design:type",Object)],t.prototype,"openPage",void 0),i([e.Input(),s("design:type",Object)],t.prototype,"selectedDate",void 0),i([e.Input(),s("design:type",Array)],t.prototype,"calendar",void 0),i([e.Input(),s("design:type",Object)],t.prototype,"heatMapColor",void 0),i([e.Input(),s("design:type",Object)],t.prototype,"primaryColor",void 0),i([e.Input(),s("design:type",Object)],t.prototype,"primaryForeground",void 0),i([e.Input(),s("design:type",Object)],t.prototype,"heatmap",void 0),i([e.Input(),s("design:type",Object)],t.prototype,"showHeader",void 0),i([e.Output(),s("design:type",e.EventEmitter)],t.prototype,"change",void 0),i([e.Output(),s("design:type",e.EventEmitter)],t.prototype,"monthChange",void 0),t=n=i([e.Component({selector:"xunk-calendar",template:'<table class="xunk-calendar">\n\n    \x3c!-- Header for changing month --\x3e\n    <tr *ngIf="showHeader">\n        \x3c!-- Previous month button --\x3e\n        <th>\n            <button mat-icon-button (click)="changeMonth(-1)">\n                <mat-icon>keyboard_arrow_left</mat-icon>\n            </button>\n        </th>\n\n        \x3c!-- Month label --\x3e\n        <th colspan=5>{{monthNames[openPage.month]}} {{openPage.year}}</th>\n\n        \x3c!-- Next month button --\x3e\n        <th>\n            <button mat-icon-button (click)="changeMonth(1)">\n                <mat-icon>keyboard_arrow_right</mat-icon>\n            </button>\n        </th>\n    </tr>\n\n    \x3c!-- Weekday headers --\x3e\n    <tr class="weekday">\n        <th>M</th>\n        <th>T</th>\n        <th>W</th>\n        <th>T</th>\n        <th>F</th>\n        <th>S</th>\n        <th>S</th>\n    </tr>\n\n    \x3c!-- The real calendar --\x3e\n    <tr *ngFor="let row of calendar">\n        <td class="xunk-calendar-cell" *ngFor="let col of row">\n            <button mat-icon-button\n                    *ngIf="col" class="xunk-calendar-day"\n                    [style.backgroundColor]="getHM(col)"\n                    [style.color]="getForeground(col)"\n                    (click)="selectDay(col)">\n                <span [style.fontWeight]="isToday(col) ? \'bold\' : null">{{col}}</span>\n            </button>\n        </td>\n    </tr>\n</table>\n',styles:[".xunk-calendar{width:100%}.xunk-calendar-cell{text-align:center;padding:.5vw 0}.weekday{color:#cacaca}.xunk-calendar-day{-webkit-transition:background-color .1s linear,color .1s linear;transition:background-color .1s linear,color .1s linear}@media (min-width:1000px){button{font-size:1.05em}}@media (min-width:1200px){button{font-size:1.08em}}"]}),s("design:paramtypes",[])],t)}(),c=function(){function t(){}return t.getToday=function(){return h.getToday()},t.zeroPad=function(t,e,n){return void 0===n&&(n="0"),h.zeropad(t,e,n)},t=i([e.NgModule({declarations:[h],imports:[n.CommonModule,o.MatIconModule,a.MatButtonModule],exports:[h]})],t)}();t.XunkCalendarModule=c,t.Éµa=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=xunk-calendar.umd.min.js.map