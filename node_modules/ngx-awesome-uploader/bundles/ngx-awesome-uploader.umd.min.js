!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/platform-browser"),require("rxjs/operators"),require("@angular/common/http"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-awesome-uploader",["exports","@angular/core","rxjs","@angular/platform-browser","rxjs/operators","@angular/common/http","@angular/common"],t):t((e=e||self)["ngx-awesome-uploader"]={},e.ng.core,e.rxjs,e.ng.platformBrowser,e.rxjs.operators,e.ng.common.http,e.ng.common)}(this,function(e,t,i,r,o,n,p){"use strict";var a=function(){return(a=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,o,n=i.call(e),p=[];try{for(;(void 0===t||t-- >0)&&!(r=n.next()).done;)p.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(i=n["return"])&&i.call(n)}finally{if(o)throw o.error}}return p}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}var c=function(){function e(e){this.sanitizer=e}return e.prototype.mockUploadFile=function(e){var t=new CustomEvent("customevent",{detail:{type:"UploadProgreess"}});return i.of(t.detail)},e.prototype.createSafeUrl=function(e){if(!window.UPLOADER_TEST_MODE)try{var t=window.URL.createObjectURL(e);return this.sanitizer.bypassSecurityTrustResourceUrl(t)}catch(i){console.log(i)}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:r.DomSanitizer}]},e}();function d(e){return e.includes("image")?"image":e.includes("video")?"video":"other"}var u={fileMaxSize:"FILE_MAX_SIZE",fileMaxCount:"FILE_MAX_COUNT",totalMaxSize:"TOTAL_MAX_SIZE",extensions:"EXTENSIONS",uploadType:"UPLOAD_TYPE",customValidator:"CUSTOM_VALIDATOR"},f=function(){return function(){}}(),h={dropzone:{title:"Drag and drop file here",or:"or",browse:"Browse Files"},cropper:{crop:"Crop",cancel:"Cancel"},previewCard:{remove:"Remove",uploadError:"Error on upload"}},m=function(){function e(e,r){this.fileService=e,this.elementRef=r,this.uploadSuccess=new t.EventEmitter,this.removeSuccess=new t.EventEmitter,this.validationError=new t.EventEmitter,this.fileAdded=new t.EventEmitter,this.enableCropper=!1,this.showeDragDropZone=!0,this.showPreviewContainer=!0,this.uploadType="multi",this.files=[],this.filesForCropper=[],this.cropClosed$=new i.Subject,this._onDestroy$=new i.Subject}return e.prototype.ngOnInit=function(){this.setCropperOptions(),this.listenToCropClose(),this.setCaptions()},e.prototype.ngOnDestroy=function(){this._onDestroy$.next()},e.prototype.setCaptions=function(){this._captions=this.captions||h},e.prototype.listenToCropClose=function(){var e=this;this.cropClosed$.pipe(o.takeUntil(this._onDestroy$)).subscribe(function(t){var i=e.filesForCropper.findIndex(function(e){return e.name===t.fileName}),r=-1!==i?e.filesForCropper[i+1]:undefined;e.filesForCropper=l(e.filesForCropper).filter(function(e){return e.name!==t.fileName}),r&&e.openCropper(r)})},e.prototype.setCropperOptions=function(){this.cropperOptions||this.setDefaultCropperOptions()},e.prototype.setDefaultCropperOptions=function(){this.cropperOptions={dragMode:"crop",aspectRatio:1,autoCrop:!0,movable:!0,zoomable:!0,scalable:!0,autoCropArea:.8}},e.prototype.onChange=function(e){var t=Array.from(e.files);this.handleFiles(t).subscribe()},e.prototype.handleFiles=function(e){var t=this;if(!this.isValidMaxFileCount(e))return i.of(null);var r=e.every(function(e){return t.validateFileSync(e)}),n=e.map(function(e){return t.validateFileAsync(e)});return i.combineLatest.apply(void 0,l(n)).pipe(o.map(function(i){var o=i.every(function(e){return!0===e});r&&o&&e.forEach(function(e,i){t.handleInputFile(e,i)})}))},e.prototype.validateFileSync=function(e){if(e&&this.isValidUploadType(e)&&this.isValidExtension(e,e.name))return!0},e.prototype.validateFileAsync=function(e){var t=this;return this.customValidator?this.customValidator(e).pipe(o.tap(function(i){i||t.validationError.next({file:e,error:u.customValidator})})):i.of(!0)},e.prototype.handleInputFile=function(e,t){"image"===d(e.type)&&this.enableCropper?(this.filesForCropper.push(e),this.currentCropperFile||this.openCropper(e)):this.isValidSize(e,e.size)&&this.pushFile(e)},e.prototype.isValidUploadType=function(e){return!("single"===this.uploadType&&this.files.length>0)||(this.validationError.next({file:e,error:u.uploadType}),!1)},e.prototype.isValidMaxFileCount=function(e){return!this.fileMaxCount||this.fileMaxCount>=this.files.length+e.length||(this.validationError.next({file:null,error:u.fileMaxCount}),!1)},e.prototype.dropped=function(e){var t,i,r=this,o=(e.files,[]);try{for(var n=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}(e.files),p=n.next();!p.done;p=n.next()){var a=p.value;if(a.fileEntry.isFile)a.fileEntry.file(function(e){o.push(e)});else a.fileEntry}}catch(s){t={error:s}}finally{try{p&&!p.done&&(i=n["return"])&&i.call(n)}finally{if(t)throw t.error}}setTimeout(function(){return r.handleFiles(o).subscribe()})},e.prototype.pushFile=function(e,t){void 0===t&&(t=e.name),this.files.push({file:e,fileName:t}),this.fileAdded.next({file:e,fileName:t})},e.prototype.openCropper=function(e){window.UPLOADER_TEST_MODE||"undefined"!=typeof Cropper?(this.safeCropImgUrl=this.fileService.createSafeUrl(e),this.currentCropperFile=e):console.warn('please import cropperjs script and styles to use cropper feature or disable it by setting [enableCropper]="false"')},e.prototype.getSafeUrl=function(e){return this.fileService.createSafeUrl(e)},e.prototype.cropperImgLoaded=function(e){var t=document.getElementById("cropper-img");this.cropper=new Cropper(t,this.cropperOptions)},e.prototype.closeCropper=function(e){var t=this;this.currentCropperFile=undefined,this.cropper=undefined,setTimeout(function(){return t.cropClosed$.next(e)},200)},e.prototype.removeFileFromList=function(e){this.files=this.files.filter(function(t){return t!==e})},e.prototype.onUploadSuccess=function(e){this.uploadSuccess.next(e)},e.prototype.isValidExtension=function(e,t){if(!this.fileExtensions)return!0;var i=t.split(".").pop();return-1!==this.fileExtensions.map(function(e){return e.toLowerCase()}).indexOf(i.toLowerCase())||(this.validationError.next({file:e,error:u.extensions}),!1)},e.prototype.isValidSize=function(e,t){var i,r,o=this.bitsToMb(t.toString());!this.fileMaxSize||this.fileMaxSize&&o<this.fileMaxSize?i=!0:this.validationError.next({file:e,error:u.fileMaxSize});var n=this.files.map(function(e){return e.file.size}).reduce(function(e,t){return e+t},0);return!this.totalMaxSize||this.totalMaxSize&&this.bitsToMb(n+e.size)<this.totalMaxSize?r=!0:this.validationError.next({file:e,error:u.totalMaxSize}),!!i&&r},e.prototype.bitsToMb=function(e){return parseFloat(e)/1048576},e.prototype.onCropSubmit=function(){this.cropper.getCroppedCanvas().toBlob(this.blobFallBack.bind(this),"image/jpeg")},e.prototype.blobFallBack=function(e){e&&(this.isValidSize(e,e.size)&&this.pushFile(e,this.currentCropperFile.name),this.closeCropper({file:e,fileName:this.currentCropperFile.name}))},e.prototype.removeFile=function(e){var t=this;this.adapter?this.adapter.removeFile(e).subscribe(function(i){t.onRemoveSuccess(e)}):console.warn("no adapter was provided")},e.prototype.onRemoveSuccess=function(e){this.removeSuccess.next(e),this.removeFileFromList(e)},e.decorators=[{type:t.Component,args:[{selector:"ngx-file-picker",template:'\n   <div (click)="fileInput.click()" class="file-drop-wrapper" *ngIf="showeDragDropZone">\n      <file-drop\n        (onFileDrop)="dropped($event)"\n        [customstyle]="\'custom-drag\'"\n        [captions]="_captions"\n      >\n      <ng-content select=".dropzoneTemplate"> </ng-content>\n      </file-drop>\n    </div>\n\n\n    <input type="file" name="file[]" id="fileInput"\n           #fileInput\n           [multiple]="uploadType === \'multi\' ? \'multiple\' : \'\' "\n           (click)="fileInput.value = null"\n           (change)="onChange(fileInput)"\n           [accept]="accept"\n           class="file-input"\n          >\n\n    <div class="cropperJsOverlay" *ngIf="currentCropperFile">\n     <div class="cropperJsBox">\n     <img [src]="safeCropImgUrl" id="cropper-img" (load) = "cropperImgLoaded($event)">\n        <div class="cropper-actions">\n        <button class="cropSubmit" (click)="onCropSubmit()">{{_captions?.cropper?.crop}}</button>\n        <button class="cropCancel" (click)="closeCropper({file: currentCropperFile, fileName: currentCropperFile.name})">\n        {{_captions?.cropper?.cancel}}\n        </button> </div>\n      </div>\n    </div>\n    <div class="files-preview-wrapper" *ngIf="showPreviewContainer">\n      <file-preview-container *ngIf="files"\n      [previewFiles]="files"\n      (removeFile)="removeFile($event)"\n      (uploadSuccess)="onUploadSuccess($event)"\n      [adapter]="adapter"\n      [itemTemplate]="itemTemplate"\n      [captions]="_captions"\n      > </file-preview-container>\n    </div>\n\n  ',styles:["*{box-sizing:border-box}:host{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;width:100%;height:100%;overflow:auto;max-width:440px;border-radius:6px}.files-preview-wrapper{width:100%}#cropper-img{max-width:60vw}#cropper-img img{width:100%;height:100%}.file-drop-wrapper{width:100%;background:#fafbfd;padding-top:20px}.preview-container{display:-webkit-box;display:flex}.cropperJsOverlay{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;position:fixed;z-index:999;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.32)}.cropperJsBox{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;max-height:calc(100vh - 38px - 50px);max-width:90vw}.cropperJsBox .cropper-actions{display:-webkit-box;display:flex}.cropperJsBox .cropper-actions button{margin:5px;padding:12px 25px;border-radius:6px;border:0;cursor:pointer}.cropperJsBox .cropper-actions .cropSubmit{color:#fff;background:#16a085}::ng-deep.cropper img{max-height:300px!important}#images{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;width:500px;overflow-x:auto}#images .image{-webkit-box-flex:0;flex:0 0 100px;margin:0 2px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:end;align-items:flex-end}#fileInput{display:none}.uploader-submit-btn{background:#ffd740;color:rgba(0,0,0,.87);border:0;padding:0 16px;line-height:36px;font-size:15px;margin-top:12px;border-radius:4px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);cursor:pointer}button:disabled{color:rgba(0,0,0,.26);background:#dcdcdc}"]}]}],e.ctorParameters=function(){return[{type:c},{type:t.ElementRef}]},e.propDecorators={uploadSuccess:[{type:t.Output}],removeSuccess:[{type:t.Output}],validationError:[{type:t.Output}],fileAdded:[{type:t.Output}],customValidator:[{type:t.Input}],enableCropper:[{type:t.Input}],showeDragDropZone:[{type:t.Input}],showPreviewContainer:[{type:t.Input}],itemTemplate:[{type:t.Input}],uploadType:[{type:t.Input}],fileMaxSize:[{type:t.Input}],fileMaxCount:[{type:t.Input}],totalMaxSize:[{type:t.Input}],accept:[{type:t.Input}],fileExtensions:[{type:t.Input}],cropperOptions:[{type:t.Input}],adapter:[{type:t.Input}],dropzoneTemplate:[{type:t.Input}],captions:[{type:t.Input}]},e}(),b=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"close-icon",template:'<div class="ngx-close-icon"></div>\r\n',styles:[':host{display:block;cursor:pointer}.ngx-close-icon{color:#fff;position:relative;margin-top:0;margin-left:0;width:1.3125em;height:1.3125em}.ngx-close-icon:before{content:"";position:absolute;top:.625em;width:1.3125em;height:.2em;background-color:currentColor;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.ngx-close-icon:after{content:"";position:absolute;top:.625em;width:1.3125em;height:.2em;background-color:currentColor;-webkit-transform:rotate(45deg);transform:rotate(45deg)}']}]}],e.ctorParameters=function(){return[]},e}(),g=function(){function e(e){this.fileService=e,this.removeFile=new t.EventEmitter,this.uploadSuccess=new t.EventEmitter,this.imageClicked=new t.EventEmitter,this.icon="checkmark"}return e.prototype.ngOnInit=function(){this.uploadFile(this.fileItem),this.fileType=d(this.fileItem.file.type),this.safeUrl=this.getSafeUrl(this.fileItem.file)},e.prototype.getSafeUrl=function(e){return this.fileService.createSafeUrl(e)},e.prototype.niceBytes=function(e){for(var t=0,i=parseInt(e,10)||0;i>=1024&&++t;)i/=1024;return i.toFixed(i<10&&t>0?1:0)+" "+["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},e.prototype.onRetry=function(){this.uploadFile(this.fileItem)},e.prototype.onCheckMarkClick=function(){this.icon="error"},e.prototype.uploadFile=function(e){var t=this;this.adapter?this.uploadSubscription=this.adapter.uploadFile(e).subscribe(function(i){"string"==typeof i&&(t.onUploadSuccess(i,e),t.uploadProgress=undefined),"number"==typeof i&&(t.uploadProgress=i)},function(e){t.uploadError=e,t.uploadProgress=undefined}):console.warn("no adapter was provided")},e.prototype.onUploadSuccess=function(e,t){this.fileId=e,this.fileItem.fileId=e,this.uploadSuccess.next(a({},t,{fileId:e}))},e.prototype.handleProgressResponse=function(e,t){switch(e.type){case n.HttpEventType.Sent:return;case n.HttpEventType.UploadProgress:return void(this.uploadProgress=Math.round(100*e.loaded/e.total));case n.HttpEventType.Response:var i=e.body;return i&&i.data,void(this.uploadProgress=undefined);default:return this.uploadProgress=undefined,'File "'+t+'" surprising upload event: '+e.type+"."}},e.prototype.onRemove=function(e){this.uploadUnsubscribe(),this.removeFile.next(e)},e.prototype.uploadUnsubscribe=function(){this.uploadSubscription&&this.uploadSubscription.unsubscribe()},e.decorators=[{type:t.Component,args:[{selector:"file-preview-item",template:'<ng-container *ngIf="!itemTemplate">\r\n    <div class="file-preview-wrapper" *ngIf="fileItem">\r\n\r\n\r\n        <div class="file-preview-thumbnail">\r\n          <div class="img-preview-thumbnail" *ngIf="fileType === \'image\'" >\r\n            <img [src]="safeUrl" (click)="imageClicked.next(fileItem)">\r\n          </div>\r\n          <div class="other-preview-thumbnail"\r\n            *ngIf="fileType !== \'image\'"\r\n            [ngClass]="fileItem.fileName.split(\'.\').pop()"\r\n            >\r\n            {{fileItem.fileName.split(\'.\').pop()}}\r\n          </div>\r\n          <div class="thumbnail-backdrop">\r\n\r\n          </div>\r\n        </div>\r\n        <div class="file-preview-description" >\r\n          <a class="file-preview-title" [title]="fileItem.fileName" href="javascript:void(0)"><p>{{fileItem.fileName}}</p></a>\r\n          <div class="file-preview-size">{{niceBytes(fileItem.file.size)}}</div>\r\n        </div>\r\n        <div class="file-preview-actions" >\r\n            <div class="ngx-checkmark-wrapper" (click)="onCheckMarkClick()" *ngIf="(icon === \'checkmark\') && !uploadError && !uploadProgress" (mouseenter)="icon = \'close\'">\r\n              <span class="ngx-checkmark"></span>\r\n            </div>\r\n            <refresh-icon *ngIf="uploadError" (retry)="onRetry()"></refresh-icon>\r\n            <a class="ngx-close-icon-wrapper"\r\n            *ngIf= "(icon === \'close\') ||  uploadError || uploadProgress"\r\n            (click)="onRemove(fileItem)"\r\n             (mouseleave)="icon = \'checkmark\'"\r\n             title="{{captions?.previewCard?.remove}}"\r\n             >\r\n              <close-icon></close-icon>\r\n            </a>\r\n        </div>\r\n        \x3c!-- *ngIf="uploadProgress !== 100"--\x3e\r\n          <a class="file-upload-error-wrapper" *ngIf="uploadError && !uploadProgress" href="javascipt:void(0)"\r\n          title="{{captions?.previewCard?.uploadError}}">\r\n          </a>\r\n\r\n        <ng-container *ngIf="uploadProgress">\r\n        <div class="file-upload-progress-bar-wrapper"  >\r\n          <div class="file-upload-progress-bar"  [ngStyle]="{ \'width\': uploadProgress + \'%\' }">\r\n          </div>\r\n        </div>\r\n\r\n        <div class="file-upload-percentage-wrapper" >\r\n          <div class="file-upload-percentage">{{uploadProgress}} %</div>\r\n          </div>\r\n        </ng-container>\r\n\r\n      </div>\r\n</ng-container>\r\n\r\n\r\n<ng-container *ngTemplateOutlet="itemTemplate;context: {fileItem: fileItem, uploadProgress: uploadProgress}" > </ng-container>\r\n',styles:[':host{display:block;padding:20px 16px;border-bottom:1px solid #ebeef1;max-width:440px;position:relative}.file-preview-wrapper{display:-webkit-box;display:flex;width:100%}.file-preview-wrapper .file-preview-thumbnail{position:relative;z-index:2;cursor:pointer}.file-preview-wrapper .file-preview-thumbnail .img-preview-thumbnail{width:36px;height:36px}.file-preview-wrapper .file-preview-thumbnail .img-preview-thumbnail img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;border-radius:6px}.file-preview-wrapper .file-preview-thumbnail .other-preview-thumbnail{width:36px;height:36px;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#706fd3;border-radius:4px;color:#fff;font-size:12px;font-weight:700;white-space:nowrap;overflow:hidden}.file-preview-wrapper .file-preview-thumbnail .other-preview-thumbnail.pdf{background:#e4394e}.file-preview-wrapper .file-preview-thumbnail .other-preview-thumbnail.doc,.file-preview-wrapper .file-preview-thumbnail .other-preview-thumbnail.docx{background:#2196f3}.file-preview-wrapper .file-preview-thumbnail .other-preview-thumbnail.xls,.file-preview-wrapper .file-preview-thumbnail .other-preview-thumbnail.xlsx{background:#4caf50}.file-preview-wrapper .file-preview-thumbnail .other-preview-thumbnail.ppt,.file-preview-wrapper .file-preview-thumbnail .other-preview-thumbnail.txt{background:#ff9800}.file-preview-wrapper .file-preview-thumbnail .thumbnail-backdrop{visibility:hidden;position:absolute;left:0;top:0;width:100%;height:100%;border-radius:6px;-webkit-transition:.1s ease-in-out;transition:.1s ease-in-out;pointer-events:none;background:rgba(43,56,71,.2)}.file-preview-wrapper .file-preview-thumbnail:hover .thumbnail-backdrop{visibility:visible}.file-preview-wrapper .file-preview-thumbnail:active .thumbnail-backdrop{visibility:visible;background:rgba(43,56,71,.4)}.file-preview-wrapper .file-preview-description{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:start;align-items:flex-start;padding-left:16px;padding-right:16px;color:#74809d;overflow:hidden;-webkit-box-flex:1;flex:1;z-index:2;position:relative}.file-preview-wrapper .file-preview-description .file-preview-title{font-weight:700;width:90%;text-decoration:none;color:#74809d;cursor:default}.file-preview-wrapper .file-preview-description .file-preview-title p{text-overflow:ellipsis;max-width:100%;overflow:hidden;white-space:nowrap;margin:0}.file-preview-wrapper .file-preview-description .file-preview-size{font-size:12px;color:#979fb8}.file-preview-wrapper .file-preview-actions{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;font-size:10px;z-index:3;position:relative}.file-preview-wrapper .file-preview-actions .ngx-checkmark-wrapper{position:relative;cursor:pointer;font-size:22px;height:20px;width:20px;border-radius:50%;background:#43d084;box-shadow:-1px 1px 6px rgba(67,208,132,.8)}.file-preview-wrapper .file-preview-actions .ngx-checkmark-wrapper .ngx-checkmark{position:absolute;top:0;left:0;height:19px;width:19px}.file-preview-wrapper .file-preview-actions .ngx-checkmark-wrapper .ngx-checkmark:after{content:"";position:absolute;display:block;left:7px;top:4px;width:3px;height:7px;border:1px solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.file-preview-wrapper .file-preview-actions .ngx-close-icon-wrapper{border-radius:50%;background:#fe7676;padding:3px;box-shadow:-1px 1px 6px rgba(254,118,118,.8);cursor:pointer}.file-preview-wrapper .file-upload-percentage-wrapper,.file-preview-wrapper .file-upload-progress-bar-wrapper{position:absolute;z-index:1;width:100%;height:95%;left:0;top:0;bottom:0;margin:auto}.file-preview-wrapper .file-upload-progress-bar{background:#eef1fa;border-radius:6px;width:0%;height:95%;-webkit-transition:width .3s ease-in;transition:width .3s ease-in}.file-preview-wrapper .file-upload-percentage{padding-right:10%;color:#c2cdda;padding-top:5%;font-size:19px;text-align:right}.file-preview-wrapper .file-upload-error-wrapper{position:absolute;z-index:1;width:100%;height:95%;left:0;top:0;bottom:0;margin:auto;background:rgba(254,84,111,.06)}']}]}],e.ctorParameters=function(){return[{type:c}]},e.propDecorators={removeFile:[{type:t.Output}],uploadSuccess:[{type:t.Output}],imageClicked:[{type:t.Output}],fileItem:[{type:t.Input}],adapter:[{type:t.Input}],itemTemplate:[{type:t.Input}],captions:[{type:t.Input}]},e}(),v=function(){function e(){this.removeFile=new t.EventEmitter,this.uploadSuccess=new t.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.openLightbox=function(e){this.lightboxFile=e},e.prototype.closeLightbox=function(){this.lightboxFile=undefined},e.decorators=[{type:t.Component,args:[{selector:"file-preview-container",template:'<preview-lightbox *ngIf="lightboxFile" [file]="lightboxFile" (close)="closeLightbox()"></preview-lightbox>\r\n<file-preview-item\r\n*ngFor="let file of previewFiles"\r\n[fileItem]="file"\r\n(removeFile)="removeFile.next($event)"\r\n(uploadSuccess)="uploadSuccess.next($event)"\r\n(imageClicked)="openLightbox($event)"\r\n[itemTemplate]="itemTemplate"\r\n[adapter]="adapter"\r\n[captions]="captions"\r\n></file-preview-item>\r\n',styles:[":host{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:start;justify-content:flex-start;width:100%;background:#fafbfd}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={previewFiles:[{type:t.Input}],itemTemplate:[{type:t.Input}],removeFile:[{type:t.Output}],uploadSuccess:[{type:t.Output}],adapter:[{type:t.Input}],captions:[{type:t.Input}]},e}(),w=function(){return function(e,t){this.relativePath=e,this.fileEntry=t}}(),x=function(){return function(e){this.files=e}}(),y=function(){function e(e,i){var r=this;this.zone=e,this.renderer=i,this.customstyle=null,this.disableIf=!1,this.onFileDrop=new t.EventEmitter,this.onFileOver=new t.EventEmitter,this.onFileLeave=new t.EventEmitter,this.stack=[],this.files=[],this.dragoverflag=!1,this.globalDisable=!1,this.numOfActiveReadEntries=0,this.customstyle||(this.customstyle="drop-zone"),this.globalStart=this.renderer.listen("document","dragstart",function(e){r.globalDisable=!0}),this.globalEnd=this.renderer.listen("document","dragend",function(e){r.globalDisable=!1})}return e.prototype.onDragOver=function(e){this.globalDisable||this.disableIf||(this.dragoverflag||(this.dragoverflag=!0,this.onFileOver.emit(e)),this.preventAndStop(e))},e.prototype.onDragLeave=function(e){this.globalDisable||this.disableIf||(this.dragoverflag&&(this.dragoverflag=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))},e.prototype.dropFiles=function(e){var t=this;if(!this.globalDisable&&!this.disableIf){var r;this.dragoverflag=!1,e.dataTransfer.dropEffect="copy",r=e.dataTransfer.items?e.dataTransfer.items.length:e.dataTransfer.files.length;for(var o=function(t){var i=void 0;if(e.dataTransfer.items?e.dataTransfer.items[t].webkitGetAsEntry&&(i=e.dataTransfer.items[t].webkitGetAsEntry()):e.dataTransfer.files[t].webkitGetAsEntry&&(i=e.dataTransfer.files[t].webkitGetAsEntry()),i)if(i.isFile){p=new w(i.name,i);n.addToQueue(p)}else i.isDirectory&&n.traverseFileTree(i,i.name);else{var r=e.dataTransfer.files[t];if(r){var o={name:r.name,isDirectory:!1,isFile:!0,file:function(e){e(r)}},p=new w(o.name,o);n.addToQueue(p)}}},n=this,p=0;p<r;p++)o(p);this.preventAndStop(e);var a=i.timer(200,200);this.subscription=a.subscribe(function(e){t.files.length>0&&0===t.numOfActiveReadEntries&&(t.onFileDrop.emit(new x(t.files)),t.files=[])})}},e.prototype.traverseFileTree=function(e,t){var i=this;if(e.isFile){var r=new w(t,e);this.files.push(r),this.zone.run(function(){i.popToStack()})}else{this.pushToStack(t),t+="/";var o=e.createReader(),n=[],p=this,a=function(){p.numOfActiveReadEntries++,o.readEntries(function(i){if(i.length)n=n.concat(i),a();else{if(0===n.length){var r=new w(t,e);p.zone.run(function(){p.addToQueue(r)})}else for(var o=function(e){p.zone.run(function(){p.traverseFileTree(n[e],t+n[e].name)})},s=0;s<n.length;s++)o(s);p.zone.run(function(){p.popToStack()})}p.numOfActiveReadEntries--})};a()}},e.prototype.addToQueue=function(e){this.files.push(e)},e.prototype.pushToStack=function(e){this.stack.push(e)},e.prototype.popToStack=function(){this.stack.pop()},e.prototype.clearQueue=function(){this.files=[]},e.prototype.preventAndStop=function(e){e.stopPropagation(),e.preventDefault()},e.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe(),this.globalStart(),this.globalEnd()},e.decorators=[{type:t.Component,args:[{selector:"file-drop",template:'<div id="dropZone"  [className]="customstyle" [class.over]="dragoverflag"\r\n    (drop)="dropFiles($event)"\r\n    (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)">\r\n\r\n    <div #ref class="custom-dropzone" >\r\n      <ng-content></ng-content>\r\n      </div>\r\n\r\n    <div class="content" *ngIf="ref.children?.length == 0">\r\n             <cloud-icon></cloud-icon>\r\n              <div class="content-top-text">\r\n                {{captions?.dropzone?.title}}\r\n              </div>\r\n              <div class="content-center-text">\r\n                {{captions?.dropzone?.or}}\r\n              </div>\r\n              <button class="file-browse-button">\r\n                {{captions?.dropzone?.browse}}\r\n              </button>\r\n    </div>\r\n</div>\r\n',styles:[":host{display:block;width:100%;padding:0 16px}#dropZone{max-width:440px;margin:auto;border:2px dashed #e8e0f5;border-radius:6px;padding:56px 0;background:#fff}.file-browse-button{padding:12px 18px;background:#673ab7;border:0;outline:0;font-size:14px;color:#fff;font-weight:700;border-radius:6px;cursor:pointer}.content{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.over{background-color:rgba(147,147,147,.5)}.content-top-text{font-size:18px;font-weight:700;color:#5b5b7b}.content-center-text{color:#90a0bc;margin:12px 0;font-size:14px}"]}]}],e.ctorParameters=function(){return[{type:t.NgZone},{type:t.Renderer2}]},e.propDecorators={captions:[{type:t.Input}],customstyle:[{type:t.Input}],disableIf:[{type:t.Input}],onFileDrop:[{type:t.Output}],onFileOver:[{type:t.Output}],onFileLeave:[{type:t.Output}]},e}(),k=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"cloud-icon",template:'    <div class="cloud-upload-icon"><i></i></div>\r\n',styles:[':host{display:block;font-size:48px;margin-bottom:.4em;height:1.36em;width:1.36em;position:relative}.cloud-upload-icon{color:#000;position:absolute;margin-left:.0625em;margin-top:.5625em;width:.3725em;height:.49em;border-radius:.25em 0 0 .25em;border-left:.0625em solid #673ab7;border-top:.0625em solid #673ab7;border-bottom:.0625em solid #673ab7}.cloud-upload-icon:before{content:"";position:absolute;top:-.4375em;left:.25em;width:.75em;height:.75em;border-radius:50%;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);border-left:.0625em solid transparent;border-right:.0625em solid #673ab7;border-top:.0625em solid #673ab7;border-bottom:.0625em solid #673ab7}.cloud-upload-icon:after{content:"";position:absolute;top:.3125em;left:.3125em;width:.5625em;height:.125em;color:#fff;background-color:#673ab7}.cloud-upload-icon i{position:absolute;left:.3125em;top:-.25em;z-index:2}.cloud-upload-icon i:before{content:"";position:absolute;top:.25em;left:.0625em;width:.0625em;height:.4375em;background-color:#673ab7;border-left:.25em solid #fff;border-right:.25em solid #fff}.cloud-upload-icon i:after{content:"";position:absolute;left:.1875em;top:.25em;width:.25em;height:.25em;border-top:.0625em solid #673ab7;border-right:.0625em solid #673ab7;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}']}]}],e.ctorParameters=function(){return[]},e}(),I=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[y,k],exports:[y],imports:[p.CommonModule],providers:[],bootstrap:[y]}]}],e}(),C=function(){function e(e){this.sanitizer=e,this.close=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.getSafeUrl(this.file.file)},e.prototype.getSafeUrl=function(e){var t=window.URL.createObjectURL(e);this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t)},e.prototype.onClose=function(e){this.close.next()},e.decorators=[{type:t.Component,args:[{selector:"preview-lightbox",template:'<div class="ng-modal-backdrop" (click)="onClose($event)">\r\n\r\n</div>\r\n\r\n<div class="ng-modal-content" >\r\n  <div class="close-icon-wrapper" (click)="onClose($event)">\r\n      <close-icon></close-icon>\r\n  </div>\r\n  <div class="lightbox-item" >\r\n    <img [src]="safeUrl" (load)="loaded = true" [ngStyle]="{\'visibility\': loaded ? \'visible\' : \'hidden\'}">\r\n  </div>\r\n </div>\r\n',styles:[":host{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;position:fixed;z-index:1040;left:0;top:0;width:100vw;height:100vh;overflow:hidden}.ng-modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background:rgba(0,0,0,.288)}.ng-modal-content{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;color:rgba(0,0,0,.87);z-index:1041}.ng-modal-content .close-icon-wrapper{position:absolute;top:20px;right:20px;font-size:20px}.ng-modal-content .lightbox-item img{max-width:calc(100vw - 30px);max-height:calc(100vh - 30px);width:100%;height:auto;-o-object-fit:contain;object-fit:contain;-webkit-animation-name:zoomIn;animation-name:zoomIn;-webkit-animation-duration:.2s;animation-duration:.2s}@-webkit-keyframes zoomIn{from{opacity:0;-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}50%{opacity:1}}@keyframes zoomIn{from{opacity:0;-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}50%{opacity:1}}"]}]}],e.ctorParameters=function(){return[{type:r.DomSanitizer}]},e.propDecorators={file:[{type:t.Input}],close:[{type:t.Output}]},e}(),S=function(){function e(){this.retry=new t.EventEmitter}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"refresh-icon",template:'<a class="upload-refresh-icon" title="Retry" (click)="retry.next()">\r\n',styles:[':host{display:block;margin-right:12px;font-size:19px}.upload-refresh-icon{display:block;color:grey;-webkit-transform:rotateZ(-180deg);transform:rotateZ(-180deg);position:relative;margin-left:.25em;margin-top:.1875em;width:.75em;height:.75em;border-radius:50%;border-top:.0625em solid currentColor;border-bottom:.0625em solid currentColor;border-left:.0625em solid transparent;border-right:.0625em solid currentColor;text-decoration:none;-webkit-transition:color .1s ease-in-out;transition:color .1s ease-in-out;cursor:pointer}.upload-refresh-icon:hover{color:#668ee9}.upload-refresh-icon:before{content:"";position:absolute;left:.0625em;top:.625em;width:.1875em;height:.1875em;border-top:.0625em solid currentColor;border-left:.0625em solid currentColor;-webkit-transform:rotate(-22.5deg);transform:rotate(-22.5deg)}']}]}],e.ctorParameters=function(){return[]},e.propDecorators={retry:[{type:t.Output}]},e}(),F=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[p.CommonModule,I],declarations:[m,v,g,C,S,b],exports:[m],providers:[c]}]}],e}();e.FilePickerAdapter=f,e.FilePickerComponent=m,e.FilePickerModule=F,e.FilePickerService=c,e.FileValidationTypes=u,e.ɵa=I,e.ɵb=y,e.ɵc=k,e.ɵd=v,e.ɵe=g,e.ɵf=C,e.ɵg=S,e.ɵh=b,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-awesome-uploader.umd.min.js.map